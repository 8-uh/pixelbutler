{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap 97c3ccd35420da8f1566","./src/index.ts","./src/core/Stage.ts","./src/core/Bitmap.ts","./src/core/FPS.ts","./src/core/RGBA.ts","./src/core/HSV.ts","./src/core/util.ts","./src/core/color.ts","./src/core/ticker.ts","./src/extra/PerlinNoise.ts","./src/loaders/loader.ts","./src/core/autosize.ts","./src/render/CanvasRenderer.ts","./src/render/WebGLRenderer.ts","./src/font/Micro.ts","./src/loaders/ImageDataLoader.ts","./src/loaders/BitmapLoader.ts","./src/loaders/TextLoader.ts","./src/loaders/JSONLoader.ts","./src/loaders/SpriteSheetLoader.ts","./src/loaders/SpriteSheetJSONLoader.ts","./src/loaders/MultiLoader.ts","./src/core/browser.ts","./src/core/SpriteSheet.ts","./src/core/Font.ts","./~/xhr/index.js","./src/core/Char.ts","./~/xhr/~/global/window.js","./~/xhr/~/once/once.js"],"names":["rgb","hsv","supportsWebGL","Stage","Stage.constructor","Stage.resizeTo","Stage.render","Stage.destruct","Bitmap","Bitmap.constructor","Bitmap._resetData","Bitmap.resizeTo","Bitmap.setPixel","Bitmap.getPixel","Bitmap.fillRect","Bitmap.drawLineH","Bitmap.drawLineV","Bitmap.drawRect","Bitmap.fillCircle","Bitmap.drawCircle","Bitmap.shader","Bitmap.text","Bitmap.drawChar","Bitmap.blit","Bitmap.clear","Bitmap.clearAlpha","Bitmap.clipFromData","FPS","FPS.constructor","FPS.begin","FPS.end","RGBA","RGBA.constructor","HSV","HSV.constructor","rand","clamp","useAlpha","hsv2rgb","rgb2hsv","interval","interval.step","request","request.step","PerlinNoise","PerlinNoise.constructor","PerlinNoise.noise","PerlinNoise.fade","PerlinNoise.lerp","PerlinNoise.grad","PerlinNoise.scale","assertMode","AutoSize","AutoSize.constructor","AutoSize.scale","AutoSize.center","AutoSize.resize","AutoSize.stop","AutoSize.scaleTo","AutoSize.scaleFit","AutoSize.scaleAspect","AutoSize.moveScreenTo","AutoSize.moveScreenCenter","AutoSize.listen","AutoSize.unlisten","AutoSize.setMode","clearAlpha","CanvasRender","CanvasRender.constructor","CanvasRender.resize","CanvasRender.update","CanvasRender.destruct","loadShader","WebGLRender","WebGLRender.constructor","WebGLRender.resize","WebGLRender.update","WebGLRender.destruct","ImageDataLoader","ImageDataLoader.constructor","ImageDataLoader.load","BitmapLoader","BitmapLoader.constructor","BitmapLoader.load","TextLoader","TextLoader.constructor","TextLoader.load","JSONLoader","JSONLoader.constructor","JSONLoader.load","SpriteSheetLoader","SpriteSheetLoader.constructor","SpriteSheetLoader.load","getURL","SpriteSheetJSONLoader","SpriteSheetJSONLoader.constructor","SpriteSheetJSONLoader.load","MultiLoader","MultiLoader.constructor","MultiLoader.load","getViewport","SpriteSheet","SpriteSheet.constructor","SpriteSheet.getSprite","SpriteSheet.getSpriteAt","SpriteSheet.addSprite","Font","Font.constructor","Char","Char.constructor"],"mappings":"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CA,KAAKA,CAACA,CAAEA;YAEZA,CAACA,GAAGA,CAACA,GAAGA,CAACA,GAAGA,CAACA;YACbA,OAAOA,IAAIA,IAAIA,CAACA,IAAIA,CAACA,KAAKA,CAACA,CAACA,GAAGA,GAAGA,CAACA,EAAEA,IAAIA,CAACA,KAAKA,CAACA,CAACA,GAAGA,GAAGA,CAACA,EAAEA,IAAIA,CAACA,KAAKA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA;SAC9EA;;QAEDA,CAACA,IAAIA,EAAEA;QACPA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;QACjBA,CAACA,GAAGA,CAACA,GAAGA,CAACA;QACTA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA;QACfA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA;QACnBA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA,CAACA,CAACA;;QAEzBA,QAAQA,CAACA,CAACA;YACTA,KAAKA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,KAAMA;AAAAA;YAEPA,KAAKA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,KAAMA;AAAAA;YAEPA,KAAKA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,KAAMA;AAAAA;YAEPA,KAAKA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,KAAMA;AAAAA;YAEPA,KAAKA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,CAACA,GAAGA,CAACA;gBACLA,KAAMA;AAAAA;Y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A,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA;gBAC5FA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA;gBAC7FA,CAACA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA;gBAChGA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA;gBAC3FA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA;gBAC5FA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA;gBAC7FA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,CAACA,EAAEA,GAAGA,EAAEA,GAAGA;gBAC3FA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,EAAEA,EAAEA,GAAGA,EAAEA,GAAGA;aAC1FA;YACDA,IAAIA,CAACA,CAACA,GAAGA,IAAIA,KAAKA,CAACA,GAAGA,CAACA;;YAEvBA,KAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,EAAEA,CAACA,EAAEA,CAAEA;gBAC7BA,IAAIA,CAACA,CAACA,CAACA,GAAGA,GAAGA,CAACA,CAACA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,IAAIA,CAACA,WAAWA,CAACA,CAACA,CAACA;aACjDA;QACFA,CAACA;QAEDD,wCAAMA,CAASA,EAAEA,CAASA,EAAEA,CAASA;YACpCE,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA;YAC3BA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA;YAC3BA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA,GAAGA,GAAGA;;YAE3BA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;YAClBA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;YAClBA,CAACA,IAAIA,IAAIA,CAACA,KAAKA,CAACA,CAACA,CAACA;;YAElBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA;YACpBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA;YACpBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA;;YAEpBA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA;YACrBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA;YACtBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA;;YAE1BA,IAAIA,CAACA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA;YACzBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA;YACtBA,IAAIA,EAAEA,GAAGA,IAAIA,CAACA,CAACA,CAACA,CAACA,GAAGA,CAACA,CAACA,GAAGA,CAACA;;YAG1BA,OAAOA,IAAIA,CAACA,KAAKA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAAGA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,CAACA,EACtFA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,EAAEA,CAACA,CAACA,CAACA,EACpCA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,EAC9CA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,CAACA,CAACA,CAACA,EAC1CA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,EAC9DA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,CAACA,EAC5CA,IAAIA,CAACA,IAAIA,CAACA,CAACA,EAAEA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,EACtDA,IAAIA,CAACA,IAAIA,CAACA,IAAIA,CAACA,CAACA,CAACA,EAAEA,GAAGA,CAACA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,CAACA,CAACA,CAACA,CAACA,CAACA,CAACA;QACtDA,CAACA;;QAEDF,uCAAKA,CAASA;YACbG,OAAOA,CAACA,GAAGA,CAACA,GAAGA,CAACA,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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;;;;CC7HA,gBAAY;AAFZ;QAUCE,cAAYA,IAAYA,EAAEA,GAAaA;YACtCC,IAAIA,CAACA,IAAIA,GAAGA,IAAIA;YAChBA,IAAIA,CAACA,KAAKA,GAAGA,GAAGA,CAACA,CAACA,CAACA,CAACA,MAAMA;YAC1BA,IAAIA,CAACA,GAAGA,GAAGA,EAAEA;;YAEbA,KAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,GAAGA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAAEA;gBACpCA,IAAIA,IAAIA,GAAGA,GAAGA,CAACA,CAACA,CAACA;gBACjBA,KAAKA,IAAIA,CAACA,GAAGA,CAACA,EAAEA,CAACA,GAAGA,IAAIA,CAACA,MAAMA,EAAEA,CAACA,EAAEA,CAAEA;oBACrCA,IAAIA,CAACA,GAAGA,CAACA,IAAIA,CAACA,CAACA,IAAIA,CAACA,MAAMA,CAACA,CAACA,CAACA,KAAKA,GAAGA,CAACA,CAACA;iBACvCA;aACDA;QACFA,CAACA;QACFD,YAACA;AAADA,KAACA,IAAA;;AAED,yBAAc,CACd;;;;;;CCzBA;AACA;AACA,KAAC;AACD;AACA,KAAC;AACD;AACA;;;;;;CCNA;;AAEA;AACA;AACA;AACA;AACA,SAAK;AACL;AACA,OAAG;AACH,KAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"pixelbutler\"] = factory();\n\telse\n\t\troot[\"pixelbutler\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nexport import Stage = require('./core/Stage');\r\n\r\nexport import Bitmap = require('./core/Bitmap');\r\nexport import IBitmapData = require('./types/IBitmapData');\r\nexport import FPS = require('./core/FPS');\r\n\r\nexport import RGBA = require('./core/RGBA');\r\nexport import HSV = require('./core/HSV');\r\n\r\nexport import PerlinNoise = require('./extra/PerlinNoise');\r\n\r\nexport import loader = require('./loaders/loader');\r\n\r\nimport _util = require('./core/util');\r\nexport import rand = _util.rand;\r\n\r\nimport _color = require('./core/color');\r\nexport import rgb2hsv = _color.rgb2hsv;\r\nexport import hsv2rgb = _color.hsv2rgb;\r\n\r\nexport import ticker = require('./core/ticker');\r\n\r\nexport function rgb(r: number, g: number, b: number): RGBA {\r\n\treturn new RGBA(r, g, b);\r\n}\r\n// TODO clean hsv alias thingy?\r\nvar hsvTmp = new HSV();\r\nexport function hsv(h: number, s: number, v: number): RGBA {\r\n\thsvTmp.h = h;\r\n\thsvTmp.s = s;\r\n\thsvTmp.v = v;\r\n\treturn hsv2rgb(hsvTmp);\r\n}\r\n\r\nexport function supportsWebGL(): boolean {\r\n\treturn (!!window && !!window.WebGLRenderingContext && !!ArrayBuffer && !!Uint8Array && !!Uint8ClampedArray);\r\n}\r\n\r\n// fake stuff for compiler bug (borked unused-imports-optimiser errornously removes exports)\r\n[\r\n\tloader,\r\n\tPerlinNoise,\r\n\t_util,\r\n\t_color,\r\n\tticker,\r\n\tRGBA,\r\n\tHSV,\r\n\tBitmap,\r\n\tFPS,\r\n\tStage\r\n];\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IOptions = require('./../types/IOptions');\r\n\r\nimport Bitmap = require('./Bitmap');\r\n\r\nimport IRenderer = require('./../types/IRenderer');\r\nimport CanvasRenderer = require('./../render/CanvasRenderer');\r\nimport WebGLRenderer = require('./../render/WebGLRenderer');\r\n\r\nimport IAutoSize = require('../types/IAutoSize');\r\nimport autosize = require('./autosize');\r\n\r\nclass Stage extends Bitmap {\r\n\r\n\tpublic canvas: HTMLCanvasElement;\r\n\tpublic renderer: IRenderer;\r\n\r\n\tpublic autoSize: IAutoSize;\r\n\r\n\tconstructor(opts: IOptions) {\r\n\t\tsuper((opts.width || 32), (opts.height || 32), !!opts.transparent);\r\n\t\r\n\t\t// grab canvas stuff\r\n\t\tthis.canvas = <HTMLCanvasElement>(typeof opts.canvas === 'string' ? document.getElementById(opts.canvas) : opts.canvas);\r\n\t\tif (!this.canvas) {\r\n\t\t\tthrow new Error('cannot locate canvas with id \"' + opts.canvas + '\"');\r\n\t\t}\r\n\r\n\t\tthis.clear();\r\n\r\n\t\t// optional renderer\r\n\t\tif (opts.renderer !== 'canvas') {\r\n\t\t\ttry {\r\n\t\t\t\tthis.renderer = new WebGLRenderer(this, this.canvas);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tconsole.log('render init error, switching to fallback');\r\n\t\t\t}\r\n\t\t}\r\n\t\t// default & fallback\r\n\t\tif (!this.renderer) {\r\n\t\t\tthis.renderer = new CanvasRenderer(this, this.canvas);\r\n\t\t}\r\n\r\n\t\tif (opts.center || opts.scale) {\r\n\t\t\tthis.autoSize = new autosize.AutoSize(this, {\r\n\t\t\t\tcenter: opts.center,\r\n\t\t\t\tscale: opts.scale\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tresizeTo(width: number, height: number): void {\r\n\t\tif (width === this.width && height === this.height) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tsuper.resizeTo(width, height);\r\n\t\tif (this.autoSize) {\r\n\t\t\tthis.autoSize.update();\r\n\t\t}\r\n\t}\r\n\r\n\trender(): void {\r\n\t\tthis.renderer.update();\r\n\t}\r\n\r\n\tdestruct(): void {\r\n\t\tif (this.autoSize) {\r\n\t\t\tthis.autoSize.stop();\r\n\t\t\tthis.autoSize = null;\r\n\t\t}\r\n\t\tif (this.renderer) {\r\n\t\t\tthis.renderer.destruct();\r\n\t\t\tthis.renderer = null;\r\n\t\t}\r\n\t\tthis.canvas = null;\r\n\t}\r\n}\r\n\r\nexport = Stage;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport INumberArray = require('../types/INumberArray');\r\nimport IBitmapData = require('../types/IBitmapData');\r\nimport IShader = require('../types/IShader');\r\nimport IRGB = require('../types/IRGB');\r\nimport IRGBA = require('../types/IRGBA');\r\n\r\nimport RGBA = require('./RGBA');\r\nimport Font = require('./Font');\r\nimport Char = require('./Char');\r\n\r\nimport microFont = require('../font/Micro');\r\nimport color = require('./color');\r\n\r\nimport util = require('./util');\r\nimport rand = util.rand;\r\nimport clamp = util.clamp;\r\n\r\nvar alpha = new RGBA(0, 0, 0, 0);\r\nvar black = new RGBA(0, 0, 0);\r\nvar magenta = new RGBA(255, 0, 255);\r\n\r\n// TODO properly implement alpha and non-alpha\r\n\r\nclass Bitmap implements IBitmapData {\r\n\r\n\tpublic width: number;\r\n\tpublic height: number;\r\n\tpublic useAlpha: boolean;\r\n\tpublic channels: number;\r\n\tpublic buffer: ArrayBuffer;\r\n\tpublic data: Uint8ClampedArray;\r\n\r\n\tconstructor(width: number, height: number, useAlpha: boolean = false, buffer: ArrayBuffer = null) {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t\tthis.channels = (useAlpha ? 4 : 3);\r\n\r\n\t\tif (buffer) {\r\n\t\t\tvar total = (this.width * this.height * this.channels);\r\n\t\t\tif (buffer.byteLength !== total) {\r\n\t\t\t\tthrow new Error('bad raw data dimensions; expected ' + total + ', received ' + buffer.byteLength);\r\n\t\t\t}\r\n\t\t\tthis.buffer = buffer;\r\n\t\t\tthis.data = new Uint8ClampedArray(this.buffer);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._resetData();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _resetData(): void {\r\n\t\t// keep reference to raw buffer for aliasing as Uint8Array\r\n\t\tthis.buffer = new ArrayBuffer(this.width * this.height * this.channels);\r\n\t\t// work on a clamped array for safety\r\n\t\tthis.data = new Uint8ClampedArray(this.buffer);\r\n\t}\r\n\r\n\tresizeTo(width: number, height: number): void {\r\n\t\tif (width === this.width && height === this.height) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t\tthis._resetData();\r\n\t}\r\n\r\n\tsetPixel(x: number, y: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\r\n\t\tif (x < 0 || y < 0 || x >= this.width || y >= this.height) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar p = (x + y * this.width) * this.channels;\r\n\t\tthis.data[p] = col.r;\r\n\t\tthis.data[p + 1] = col.g;\r\n\t\tthis.data[p + 2] = col.b;\r\n\t}\r\n\r\n\tgetPixel(x: number, y: number, col?: IRGB): IRGB {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\r\n\t\tif (x < 0 || y < 0 || x >= this.width || y >= this.height) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tcol = (col || new RGBA());\r\n\r\n\t\tvar p = (x + y * this.width) * this.channels;\r\n\t\tcol.r = this.data[p];\r\n\t\tcol.g = this.data[p + 1];\r\n\t\tcol.b = this.data[p + 2];\r\n\t\treturn col;\r\n\t}\r\n\r\n\tfillRect(x: number, y: number, width: number, height: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\twidth = Math.floor(width);\r\n\t\theight = Math.floor(height);\r\n\r\n\t\tif (x >= this.width || y >= this.height || x + width < 0 || y + height < 0) {\r\n\t\t\t// fast bail\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar left = x;\r\n\t\tvar right = x + width;\r\n\t\tvar top = y;\r\n\t\tvar bottom = y + height;\r\n\r\n\t\tif (left < 0) {\r\n\t\t\tleft = 0;\r\n\t\t}\r\n\t\tif (top < 0) {\r\n\t\t\ttop = 0;\r\n\t\t}\r\n\r\n\t\tif (right >= this.width) {\r\n\t\t\tright = this.width;\r\n\t\t}\r\n\t\tif (bottom >= this.height) {\r\n\t\t\tbottom = this.height;\r\n\t\t}\r\n\r\n\r\n\t\tfor (var iy = top; iy < bottom; iy++) {\r\n\t\t\tfor (var ix = left; ix < right; ix++) {\r\n\t\t\t\tvar write = (ix + iy * this.width) * this.channels;\r\n\t\t\t\tthis.data[write] = col.r;\r\n\t\t\t\tthis.data[write + 1] = col.g;\r\n\t\t\t\tthis.data[write + 2] = col.b;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrawLineH(x: number, y: number, size: number, col: IRGB): void {\r\n\t\tvar right = clamp(Math.floor(x + size), 0, this.width);\r\n\t\tx = clamp(Math.floor(x), 0, this.width);\r\n\t\ty = clamp(Math.floor(y), 0, this.height);\r\n\r\n\t\tfor (; x < right; x++) {\r\n\t\t\tvar write = (x + y * this.width) * this.channels;\r\n\t\t\tthis.data[write] = col.r;\r\n\t\t\tthis.data[write + 1] = col.g;\r\n\t\t\tthis.data[write + 2] = col.b;\r\n\t\t}\r\n\t}\r\n\r\n\tdrawLineV(x: number, y: number, size: number, col: IRGB): void {\r\n\t\tvar bottom = clamp(Math.floor(y + size), 0, this.height);\r\n\t\tx = clamp(Math.floor(x), 0, this.width);\r\n\t\ty = clamp(Math.floor(y), 0, this.height);\r\n\r\n\t\tfor (; y < bottom; y++) {\r\n\t\t\tvar write = (x + y * this.width) * this.channels;\r\n\t\t\tthis.data[write] = col.r;\r\n\t\t\tthis.data[write + 1] = col.g;\r\n\t\t\tthis.data[write + 2] = col.b;\r\n\t\t}\r\n\t}\r\n\r\n\tdrawRect(x: number, y: number, width: number, height: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\twidth = Math.floor(width);\r\n\t\theight = Math.floor(height);\r\n\t\tthis.drawLineH(x, y, width, col);\r\n\t\tthis.drawLineH(x, y + height - 1, width, col);\r\n\t\tthis.drawLineV(x, y, height, col);\r\n\t\tthis.drawLineV(x + width - 1, y, height, col);\r\n\t}\r\n\r\n\tfillCircle(x: number, y: number, r: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\tr = Math.floor(r);\r\n\r\n\t\t// TODO optimise fillCircle\r\n\r\n\t\tfor (var iy = -r; iy <= r; iy++) {\r\n\t\t\tfor (var ix = -r; ix <= r; ix++) {\r\n\t\t\t\tif (x + ix < 0 || y + iy < 0 || x + ix >= this.width || y + iy >= this.height) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (ix * ix + iy * iy <= r * r) {\r\n\t\t\t\t\tvar write = (x + ix + (y + iy) * this.width) * this.channels;\r\n\t\t\t\t\tthis.data[write] = col.r;\r\n\t\t\t\t\tthis.data[write + 1] = col.g;\r\n\t\t\t\t\tthis.data[write + 2] = col.b;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tdrawCircle(x: number, y: number, r: number, col: IRGB): void {\r\n\t\tx = Math.floor(x);\r\n\t\ty = Math.floor(y);\r\n\t\tr = Math.floor(r);\r\n\r\n\t\t// TODO optimise drawCircle\r\n\r\n\t\tfor (var i = 0; i < 360; i++) {\r\n\t\t\tvar cx = Math.round(Math.cos(i * (Math.PI / 180)) * r) + x;\r\n\t\t\tvar cy = Math.round(Math.sin(i * (Math.PI / 180)) * r) + y;\r\n\r\n\t\t\tif (cx < 0 || cy < 0 || cx >= this.width || cy >= this.height) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tvar write = (cx + cy * this.width) * this.channels;\r\n\t\t\tthis.data[write] = col.r;\r\n\t\t\tthis.data[write + 1] = col.g;\r\n\t\t\tthis.data[write + 2] = col.b;\r\n\t\t}\r\n\t}\r\n\r\n\tshader(f: IShader): void {\r\n\t\tvar iy: number;\r\n\t\tvar ix: number;\r\n\t\tvar col: IRGBA;\r\n\r\n\t\tvar rgb = new RGBA();\r\n\r\n\t\tfor (iy = 0; iy < this.height; iy++) {\r\n\t\t\tfor (ix = 0; ix < this.width; ix++) {\r\n\t\t\t\tvar index: number = (ix + iy * this.width) * this.channels;\r\n\t\t\t\trgb.r = this.data[index];\r\n\t\t\t\trgb.g = this.data[index + 1];\r\n\t\t\t\trgb.b = this.data[index + 2];\r\n\r\n\t\t\t\tcol = f(ix, iy, rgb);\r\n\r\n\t\t\t\tthis.data[index] = col.r;\r\n\t\t\t\tthis.data[index + 1] = col.g;\r\n\t\t\t\tthis.data[index + 2] = col.b;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\ttext(x: number, y: number, txt: string, col: IRGB): void {\r\n\t\ttxt = String(txt);\r\n\r\n\t\tfor (var i = 0; i < txt.length; i++) {\r\n\t\t\tx += this.drawChar(x, y, txt.charAt(i), col) + 1;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate drawChar(x: number, y: number, chr: string, col: IRGB): number {\r\n\t\tvar char: Char = microFont.chars[chr.toUpperCase()];\r\n\t\tif (!char) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\r\n\t\tfor (var iy = 0; iy < microFont.height; iy++) {\r\n\t\t\tfor (var ix = 0; ix < char.width; ix++) {\r\n\t\t\t\tif (char.map[iy * char.width + ix]) {\r\n\t\t\t\t\tthis.setPixel(x + ix, y + iy, col);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn char.width;\r\n\t}\r\n\r\n\tblit(sprite: Bitmap, x?: number, y?: number): void {\r\n\t\tx = (x ? Math.floor(x) : 0);\r\n\t\ty = (y ? Math.floor(y) : 0);\r\n\r\n\t\tvar iy: number;\r\n\t\tvar ix: number;\r\n\t\tvar read: number;\r\n\t\tvar write: number;\r\n\r\n\t\tif (x >= this.width || y >= this.height || x + sprite.width < 0 || y + sprite.height < 0) {\r\n\t\t\t// fast bail\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar left = x;\r\n\t\tvar right = x + sprite.width;\r\n\t\tvar top = y;\r\n\t\tvar bottom = y + sprite.height;\r\n\r\n\t\tif (left < 0) {\r\n\t\t\tleft = 0;\r\n\t\t}\r\n\t\tif (top < 0) {\r\n\t\t\ttop = 0;\r\n\t\t}\r\n\r\n\t\tif (right >= this.width) {\r\n\t\t\tright = this.width;\r\n\t\t}\r\n\t\tif (bottom >= this.height) {\r\n\t\t\tbottom = this.height;\r\n\t\t}\r\n\r\n\t\tif (sprite.useAlpha) {\r\n\t\t\tfor (iy = top; iy < bottom; iy++) {\r\n\t\t\t\tfor (ix = left; ix < right; ix++) {\r\n\t\t\t\t\tread = (ix - x + (iy - y) * sprite.width) * sprite.channels;\r\n\t\t\t\t\twrite = (ix + iy * this.width) * this.channels;\r\n\r\n\t\t\t\t\tvar alpha = sprite.data[read + 3] / 255;\r\n\t\t\t\t\tvar inv = 1 - alpha;\r\n\t\t\t\t\tthis.data[write] = Math.round(this.data[write] * inv + sprite.data[read] * alpha);\r\n\t\t\t\t\tthis.data[write + 1] = Math.round(this.data[write + 1] * inv + sprite.data[read + 1] * alpha);\r\n\t\t\t\t\tthis.data[write + 2] = Math.round(this.data[write + 2] * inv + sprite.data[read + 2] * alpha);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (iy = top; iy < bottom; iy++) {\r\n\t\t\t\tfor (ix = left; ix < right; ix++) {\r\n\t\t\t\t\tread = (ix - x + (iy - y) * sprite.width) * sprite.channels;\r\n\t\t\t\t\twrite = (ix + iy * this.width) * this.channels;\r\n\r\n\t\t\t\t\tthis.data[write] = sprite.data[read];\r\n\t\t\t\t\tthis.data[write + 1] = sprite.data[read + 1];\r\n\t\t\t\t\tthis.data[write + 2] = sprite.data[read + 2];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclear(col?: IRGB): void {\r\n\t\tcol = col || black;\r\n\r\n\t\tvar lim: number;\r\n\t\tvar i: number;\r\n\r\n\t\tif (this.useAlpha && color.useAlpha(col)) {\r\n\t\t\tlim = this.width * this.height * 4;\r\n\t\t\tfor (i = 0; i < lim; i += 4) {\r\n\t\t\t\tthis.data[i] = col.r;\r\n\t\t\t\tthis.data[i + 1] = col.g;\r\n\t\t\t\tthis.data[i + 2] = col.b;\r\n\t\t\t\tthis.data[i + 3] = (<IRGBA>col).a;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlim = this.width * this.height * this.channels;\r\n\t\t\tfor (i = 0; i < lim; i += this.channels) {\r\n\t\t\t\tthis.data[i] = col.r;\r\n\t\t\t\tthis.data[i + 1] = col.g;\r\n\t\t\t\tthis.data[i + 2] = col.b;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tclearAlpha(alpha: number = 0): void {\r\n\t\tif (!this.useAlpha) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar lim: number = this.width * this.height * 4;\r\n\t\tfor (var i = 3; i < lim; i += 4) {\r\n\t\t\tthis.data[i] = alpha;\r\n\t\t}\r\n\t}\r\n\r\n\t/* tslint:disable: max-line-length */\r\n\tstatic clipFromData(inputData: INumberArray, inputWidth: number, inputHeight: number, inputChannels: number, x: number, y: number, width: number, height: number, useAlpha: boolean): Bitmap {\r\n\r\n\t\tvar channels = useAlpha ? 4 : 3;\r\n\t\tvar data = new Uint8Array(height * width * channels);\r\n\r\n\t\tvar iy: number;\r\n\t\tvar ix: number;\r\n\t\tvar read: number;\r\n\t\tvar write: number;\r\n\r\n\t\tif (useAlpha) {\r\n\t\t\tfor (iy = 0; iy < height; iy++) {\r\n\t\t\t\tfor (ix = 0; ix < width; ix++) {\r\n\t\t\t\t\tread = (ix + x + (iy + y) * inputWidth) * inputChannels;\r\n\t\t\t\t\twrite = (ix + iy * width) * channels;\r\n\r\n\t\t\t\t\tdata[write] = inputData[read];\r\n\t\t\t\t\tdata[write + 1] = inputData[read + 1];\r\n\t\t\t\t\tdata[write + 2] = inputData[read + 2];\r\n\t\t\t\t\tdata[write + 3] = inputData[read + 3];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tfor (iy = 0; iy < height; iy++) {\r\n\t\t\t\tfor (ix = 0; ix < width; ix++) {\r\n\t\t\t\t\tread = (ix + x + (iy + y) * inputWidth) * inputChannels;\r\n\t\t\t\t\twrite = (ix + iy * width) * channels;\r\n\r\n\t\t\t\t\tdata[write] = inputData[read];\r\n\t\t\t\t\tdata[write + 1] = inputData[read + 1];\r\n\t\t\t\t\tdata[write + 2] = inputData[read + 2];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn new Bitmap(width, height, useAlpha, data);\r\n\t}\r\n}\r\n\r\nexport = Bitmap;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nclass FPS {\r\n\tprivate previous: number;\r\n\tprivate smoothFPS: number;\r\n\tprivate smoothDelta: number;\r\n\tprivate tickHistory: number[] = [0];\r\n\tprivate deltaHistory: number[] = [0];\r\n\tprivate tickI: number = 0;\r\n\tprivate deltaI: number = 0;\r\n\r\n\tconstructor(smoothFPS: number = 30, smoothDelta: number = 2) {\r\n\t\tthis.smoothFPS = smoothFPS;\r\n\t\tthis.smoothDelta = smoothDelta;\r\n\t\tthis.previous = performance.now();\r\n\t}\r\n\r\n\tbegin(): void {\r\n\t\tvar now = performance.now();\r\n\t\tvar delta = now - this.previous;\r\n\t\tthis.tickHistory[this.tickI % this.smoothFPS] = delta;\r\n\t\tthis.tickI++;\r\n\t\tthis.previous = now;\r\n\t}\r\n\r\n\tend(): void {\r\n\t\tvar now = performance.now();\r\n\t\tvar delta = now - this.previous;\r\n\t\tthis.deltaHistory[this.deltaI % this.smoothDelta] = delta;\r\n\t\tthis.deltaI++;\r\n\t}\r\n\r\n\t/* tslint:disable: no-duplicate-variable */\r\n\tget fps(): number {\r\n\t\tvar tot = 0;\r\n\t\tfor (var i = 0; i < this.tickHistory.length; i++) {\r\n\t\t\ttot += this.tickHistory[i];\r\n\t\t}\r\n\t\treturn Math.ceil(1000 / (tot / this.tickHistory.length));\r\n\t}\r\n\r\n\tget redraw(): number {\r\n\t\tvar tot = 0;\r\n\t\tfor (var i = 0; i < this.deltaHistory.length; i++) {\r\n\t\t\ttot += this.deltaHistory[i];\r\n\t\t}\r\n\t\treturn Math.ceil(tot / this.deltaHistory.length);\r\n\t}\r\n\r\n\t/* tslint:enable: no-duplicate-variable */\r\n}\r\n\r\nexport = FPS;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IRGBA = require('../types/IRGBA');\r\n\r\nclass RGBA implements IRGBA {\r\n\tpublic r: number;\r\n\tpublic g: number;\r\n\tpublic b: number;\r\n\tpublic a: number;\r\n\r\n\tconstructor(r: number = 0, g: number = 0, b: number = 0, a: number = 255) {\r\n\t\tthis.r = r;\r\n\t\tthis.g = g;\r\n\t\tthis.b = b;\r\n\t\tthis.a = a;\r\n\t}\r\n}\r\n\r\nexport = RGBA;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IHSV = require('../types/IHSV');\r\n\r\nclass HSV implements IHSV {\r\n\tpublic h: number;\r\n\tpublic s: number;\r\n\tpublic v: number;\r\n\r\n\tconstructor(h: number = 0, s: number = 0, v: number = 0) {\r\n\t\tthis.h = h;\r\n\t\tthis.s = s;\r\n\t\tthis.v = v;\r\n\t}\r\n}\r\n\r\nexport  = HSV;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nexport function rand(max: number): number {\r\n\treturn Math.floor(Math.random() * max);\r\n}\r\n\r\nexport function clamp(value: number, min: number, max: number) {\r\n\tif (value < min) {\r\n\t\treturn min;\r\n\t}\r\n\tif (value > max) {\r\n\t\treturn max;\r\n\t}\r\n\treturn value;\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IRGB = require('../types/IRGB');\r\nimport IRGBA = require('../types/IRGBA');\r\nimport IHSV = require('../types/IHSV');\r\nimport RGBA = require('./RGBA');\r\nimport HSV = require('./HSV');\r\n\r\n// hacky util\r\nexport function useAlpha(col: IRGB): boolean {\r\n\treturn (typeof (<IRGBA>col).a === 'number' && (<IRGBA>col).a < 255);\r\n}\r\n\r\n/**\r\n * HSV to RGB color conversion\r\n *\r\n * H runs from 0 to 360 degrees\r\n * S and V run from 0 to 100\r\n *\r\n * Ported from the excellent java algorithm by Eugene Vishnevsky at\r\n * http://www.cs.rit.edu/~ncs/color/t_convert.html\r\n *\r\n * This, in turn, was taken from the snippet at\r\n * http://snipplr.com/view/14590/hsv-to-rgb/\r\n */\r\nexport function hsv2rgb(hsv: IHSV): IRGBA {\r\n\tvar r, g, b;\r\n\tvar i;\r\n\tvar f, p, q, t;\r\n\tvar h = hsv.h;\r\n\tvar s = hsv.s;\r\n\tvar v = hsv.v;\r\n\r\n\t// Make sure our arguments stay in-range\r\n\th = Math.max(0, Math.min(360, h));\r\n\ts = Math.max(0, Math.min(100, s));\r\n\tv = Math.max(0, Math.min(100, v));\r\n\r\n\t// We accept saturation and value arguments from 0 to 100 because that's\r\n\t// how Photoshop represents those values. Internally, however, the\r\n\t// saturation and value are calculated from a range of 0 to 1. We make\r\n\t// That conversion here.\r\n\ts /= 100;\r\n\tv /= 100;\r\n\r\n\tif (s === 0) {\r\n\t\t// Achromatic (grey)\r\n\t\tr = g = b = v;\r\n\t\treturn new RGBA(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255));\r\n\t}\r\n\r\n\th /= 60; // sector 0 to 5\r\n\ti = Math.floor(h);\r\n\tf = h - i; // factorial part of h\r\n\tp = v * (1 - s);\r\n\tq = v * (1 - s * f);\r\n\tt = v * (1 - s * (1 - f));\r\n\r\n\tswitch (i) {\r\n\t\tcase 0:\r\n\t\t\tr = v;\r\n\t\t\tg = t;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 1:\r\n\t\t\tr = q;\r\n\t\t\tg = v;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 2:\r\n\t\t\tr = p;\r\n\t\t\tg = v;\r\n\t\t\tb = t;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 3:\r\n\t\t\tr = p;\r\n\t\t\tg = q;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\r\n\t\tcase 4:\r\n\t\t\tr = t;\r\n\t\t\tg = p;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\r\n\t\tdefault: // case 5:\r\n\t\t\tr = v;\r\n\t\t\tg = p;\r\n\t\t\tb = q;\r\n\t}\r\n\r\n\treturn new RGBA(\r\n\t\tMath.round(r * 255),\r\n\t\tMath.round(g * 255),\r\n\t\tMath.round(b * 255)\r\n\t);\r\n}\r\n\r\n/**\r\n * RGB to HSV color conversion\r\n *\r\n * Gratefully lifted from Mic's code on StackOverflow:\r\n * http://stackoverflow.com/questions/8022885/rgb-to-hsv-color-in-javascript#8023734\r\n */\r\nexport function rgb2hsv(rgb: IRGB): IHSV {\r\n\tvar rr, gg, bb,\r\n\t\tr = rgb.r / 255,\r\n\t\tg = rgb.g / 255,\r\n\t\tb = rgb.b / 255,\r\n\t\th, s,\r\n\t\tv = Math.max(r, g, b),\r\n\t\tdiff = v - Math.min(r, g, b),\r\n\t\tdiffc = function (c) {\r\n\t\t\treturn (v - c) / 6 / diff + 1 / 2;\r\n\t\t};\r\n\r\n\tif (diff === 0) {\r\n\t\th = s = 0;\r\n\t}\r\n\telse {\r\n\t\ts = diff / v;\r\n\t\trr = diffc(r);\r\n\t\tgg = diffc(g);\r\n\t\tbb = diffc(b);\r\n\r\n\t\tif (r === v) {\r\n\t\t\th = bb - gg;\r\n\t\t} else if (g === v) {\r\n\t\t\th = (1 / 3) + rr - bb;\r\n\t\t} else if (b === v) {\r\n\t\t\th = (2 / 3) + gg - rr;\r\n\t\t}\r\n\t\tif (h < 0) {\r\n\t\t\th += 1;\r\n\t\t} else if (h > 1) {\r\n\t\t\th -= 1;\r\n\t\t}\r\n\t}\r\n\treturn new HSV(\r\n\t\tMath.round(h * 360),\r\n\t\tMath.round(s * 100),\r\n\t\tMath.round(v * 100)\r\n\t);\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\n// TODO add functionality to pass frame-number and high-precision performance.now()\r\nimport ITicker = require('./../types/ITicker');\r\n\r\nexport interface FrameHandler {\r\n\t(frame: number, delta: number): void\r\n}\r\n\r\n// simple setInterval ticker\r\nexport function interval(callback: FrameHandler, fps: number): ITicker {\r\n\tvar intervalID = 0;\r\n\tvar frame = 0;\r\n\tvar prev = performance.now();\r\n\r\n\tfunction step() {\r\n\t\tif (intervalID) {\r\n\t\t\tframe++;\r\n\t\t\tvar now = performance.now();\r\n\t\t\tcallback(frame, now - prev);\r\n\t\t\tprev = now;\r\n\t\t}\r\n\t}\r\n\r\n\tvar that: ITicker = <ITicker>{};\r\n\tthat.start = function () {\r\n\t\tif (intervalID) {\r\n\t\t\tclearInterval(intervalID);\r\n\t\t}\r\n\t\tintervalID = setInterval(step, 1000 / fps);\r\n\t};\r\n\tthat.step = function () {\r\n\t\tstep();\r\n\t};\r\n\tthat.stop = function () {\r\n\t\tif (intervalID) {\r\n\t\t\tclearInterval(intervalID);\r\n\t\t\tintervalID = 0;\r\n\t\t}\r\n\t};\r\n\tthat.isRunning = function () {\r\n\t\treturn !!intervalID;\r\n\t};\r\n\treturn that;\r\n}\r\n\r\n// simple requestAnimationFrame ticker\r\nexport function request(callback: FrameHandler): ITicker {\r\n\tvar running = false;\r\n\tvar frame = 0;\r\n\tvar prev = performance.now();\r\n\r\n\tfunction step() {\r\n\t\tif (running) {\r\n\t\t\tframe++;\r\n\t\t\tvar now = performance.now();\r\n\t\t\tcallback(frame, now - prev);\r\n\t\t\tprev = now;\r\n\t\t\trequestAnimationFrame(step);\r\n\t\t}\r\n\t}\r\n\r\n\tvar requestID: number;\r\n\tvar that: ITicker = <ITicker>{};\r\n\tthat.start = function () {\r\n\t\tif (!running) {\r\n\t\t\trunning = true;\r\n\t\t\trequestID = requestAnimationFrame(step);\r\n\t\t}\r\n\t};\r\n\tthat.step = function () {\r\n\t\tstep();\r\n\t};\r\n\tthat.stop = function () {\r\n\t\tif (running) {\r\n\t\t\trunning = false;\r\n\t\t\tcancelAnimationFrame(requestID);\r\n\t\t}\r\n\t};\r\n\tthat.isRunning = function () {\r\n\t\treturn running;\r\n\t};\r\n\treturn that;\r\n}\r\n","// This is a port of Ken Perlin's Java code. The\r\n// original Java code is at http://cs.nyu.edu/%7Eperlin/noise/.\r\n// Note that in this version, a number from 0 to 1 is returned.\r\n\r\n// copy-paste-salvaged via http://asserttrue.blogspot.fi/2011/12/perlin-noise-in-javascript_31.html\r\n\r\n/* tslint:disable */\r\n\r\nclass PerlinNoise {\r\n\r\n\tprivate p: number[];\r\n\tprivate permutation: number[];\r\n\r\n\tconstructor() {\r\n\t\t// To remove the need for index wrapping, double the permutation table length\r\n\t\tthis.permutation = [ 151, 160, 137, 91, 90, 15,\r\n\t\t\t131, 13, 201, 95, 96, 53, 194, 233, 7, 225, 140, 36, 103, 30, 69, 142, 8, 99, 37, 240, 21, 10, 23,\r\n\t\t\t190, 6, 148, 247, 120, 234, 75, 0, 26, 197, 62, 94, 252, 219, 203, 117, 35, 11, 32, 57, 177, 33,\r\n\t\t\t88, 237, 149, 56, 87, 174, 20, 125, 136, 171, 168, 68, 175, 74, 165, 71, 134, 139, 48, 27, 166,\r\n\t\t\t77, 146, 158, 231, 83, 111, 229, 122, 60, 211, 133, 230, 220, 105, 92, 41, 55, 46, 245, 40, 244,\r\n\t\t\t102, 143, 54, 65, 25, 63, 161, 1, 216, 80, 73, 209, 76, 132, 187, 208, 89, 18, 169, 200, 196,\r\n\t\t\t135, 130, 116, 188, 159, 86, 164, 100, 109, 198, 173, 186, 3, 64, 52, 217, 226, 250, 124, 123,\r\n\t\t\t5, 202, 38, 147, 118, 126, 255, 82, 85, 212, 207, 206, 59, 227, 47, 16, 58, 17, 182, 189, 28, 42,\r\n\t\t\t223, 183, 170, 213, 119, 248, 152, 2, 44, 154, 163, 70, 221, 153, 101, 155, 167, 43, 172, 9,\r\n\t\t\t129, 22, 39, 253, 19, 98, 108, 110, 79, 113, 224, 232, 178, 185, 112, 104, 218, 246, 97, 228,\r\n\t\t\t251, 34, 242, 193, 238, 210, 144, 12, 191, 179, 162, 241, 81, 51, 145, 235, 249, 14, 239, 107,\r\n\t\t\t49, 192, 214, 31, 181, 199, 106, 157, 184, 84, 204, 176, 115, 121, 50, 45, 127, 4, 150, 254,\r\n\t\t\t138, 236, 205, 93, 222, 114, 67, 29, 24, 72, 243, 141, 128, 195, 78, 66, 215, 61, 156, 180\r\n\t\t];\r\n\t\tthis.p = new Array(512);\r\n\r\n\t\tfor (var i = 0; i < 256; i++) {\r\n\t\t\tthis.p[256 + i] = this.p[i] = this.permutation[i];\r\n\t\t}\r\n\t}\r\n\r\n\tnoise(x: number, y: number, z: number): number {\r\n\t\tvar X = Math.floor(x) & 255;     // FIND UNIT CUBE THAT\r\n\t\tvar Y = Math.floor(y) & 255;     // CONTAINS POINT.\r\n\t\tvar Z = Math.floor(z) & 255;\r\n\r\n\t\tx -= Math.floor(x);              // FIND RELATIVE X,Y,Z\r\n\t\ty -= Math.floor(y);              // OF POINT IN CUBE.\r\n\t\tz -= Math.floor(z);\r\n\r\n\t\tvar u = this.fade(x);            // COMPUTE FADE CURVES\r\n\t\tvar v = this.fade(y);            // FOR EACH OF X,Y,Z.\r\n\t\tvar w = this.fade(z);\r\n\r\n\t\tvar A = this.p[X] + Y;\r\n\t\tvar AA = this.p[A] + Z;\r\n\t\tvar AB = this.p[A + 1] + Z;      // HASH COORDINATES OF\r\n\r\n\t\tvar B = this.p[X + 1] + Y;\r\n\t\tvar BA = this.p[B] + Z;\r\n\t\tvar BB = this.p[B + 1] + Z;      // THE 8 CUBE CORNERS,\r\n\r\n\t\t// @bartvs: wtf.. but at least it works\r\n\t\treturn this.scale(this.lerp(w, this.lerp(v, this.lerp(u, this.grad(this.p[AA  ], x, y, z),  // AND ADD\r\n\t\t\t\t\tthis.grad(this.p[BA], x - 1, y, z)), // BLENDED\r\n\t\t\t\tthis.lerp(u, this.grad(this.p[AB], x, y - 1, z),  // RESULTS\r\n\t\t\t\t\tthis.grad(this.p[BB], x - 1, y - 1, z))),// FROM  8\r\n\t\t\tthis.lerp(v, this.lerp(u, this.grad(this.p[AA + 1], x, y, z - 1),  // CORNERS\r\n\t\t\t\t\tthis.grad(this.p[BA + 1], x - 1, y, z - 1)), // OF CUBE\r\n\t\t\t\tthis.lerp(u, this.grad(this.p[AB + 1], x, y - 1, z - 1),\r\n\t\t\t\t\tthis.grad(this.p[BB + 1], x - 1, y - 1, z - 1)))));\r\n\t}\r\n\r\n\tfade(t: number): number {\r\n\t\treturn t * t * t * (t * (t * 6 - 15) + 10);\r\n\t}\r\n\r\n\tlerp(t: number, a: number, b: number): number {\r\n\t\treturn a + t * (b - a);\r\n\t}\r\n\r\n\tgrad(hash: number, x: number, y: number, z: number): number {\r\n\t\tvar h = hash & 15;      // CONVERT LO 4 BITS OF HASH CODE\r\n\t\tvar u = h < 8 ? x : y;  // INTO 12 GRADIENT DIRECTIONS.\r\n\t\tvar v = h < 4 ? y : h == 12 || h == 14 ? x : z;\r\n\t\treturn ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\r\n\t}\r\n\r\n\tscale(n: number): number {\r\n\t\treturn (1 + n) / 2;\r\n\t}\r\n}\r\n\r\nexport = PerlinNoise;\r\n","export import ImageDataLoader = require('./ImageDataLoader');\r\nexport import BitmapLoader = require('./BitmapLoader');\r\nexport import TextLoader = require('./TextLoader');\r\nexport import JSONLoader = require('./JSONLoader');\r\nexport import SpriteSheetLoader = require('./SpriteSheetLoader');\r\nexport import SpriteSheetJSONLoader = require('./SpriteSheetJSONLoader');\r\nexport import MultiLoader = require('./MultiLoader');\r\n\r\n// bugs\r\n[\r\n\tMultiLoader,\r\n\tImageDataLoader,\r\n\tBitmapLoader,\r\n\tTextLoader,\r\n\tJSONLoader,\r\n\tSpriteSheetLoader,\r\n\tSpriteSheetJSONLoader\r\n];\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Stage = require('./Stage');\r\nimport browser = require('./browser');\r\n\r\nimport IAutoSize = require('./../types/IAutoSize');\r\nimport IBlock = require('./../types/IBlock');\r\n\r\nfunction assertMode(scaleMode: any): void {\r\n\tif ((typeof scaleMode === 'number' && scaleMode > 0)\r\n\t\t|| scaleMode === 'max'\r\n\t\t|| scaleMode === 'fit'\r\n\t\t|| scaleMode === 'none') {\r\n\t\treturn;\r\n\t}\r\n\tvar int = parseInt(scaleMode, 10);\r\n\tif (!isNaN(int) && int > 0) {\r\n\t\treturn;\r\n\t}\r\n\tthrow new Error('bad scaleMode: ' + scaleMode);\r\n}\r\n\r\nexport interface IAutoSizeOpts {\r\n\tcenter?: boolean;\r\n\tscale?: any;\r\n}\r\n\r\nexport class AutoSize implements IAutoSize {\r\n\r\n\tprivate stage: Stage;\r\n\tprivate scaleMode: any;\r\n\tprivate centerView: boolean;\r\n\tpublic update: (event?: any) => void;\r\n\r\n\tconstructor(stage: Stage, opts: IAutoSizeOpts) {\r\n\t\tthis.stage = stage;\r\n\r\n\t\topts = opts || {};\r\n\t\tthis.centerView = !!opts.center;\r\n\t\tthis.scaleMode = opts.scale || 'none';\r\n\t\tassertMode(this.scaleMode);\r\n\r\n\t\tstage.canvas.style.position = 'absolute';\r\n\r\n\t\tthis.update = (event?: any) => {\r\n\t\t\tvar viewPort = browser.getViewport();\r\n\t\t\tif (this.scaleMode === 'fit') {\r\n\t\t\t\tthis.scaleFit(viewPort);\r\n\t\t\t}\r\n\t\t\telse if (this.scaleMode === 'max') {\r\n\t\t\t\tthis.scaleAspect(viewPort);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.stage.renderer.resize();\r\n\t\t\t}\r\n\r\n\t\t\tif (this.centerView || this.scaleMode === 'max') {\r\n\t\t\t\tthis.moveScreenCenter(viewPort);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.moveScreenTo(0, 0);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.setMode(this.scaleMode, this.centerView);\r\n\t}\r\n\r\n\t// factory result\r\n\tscale(mode: any): void {\r\n\t\tthis.setMode(mode, this.centerView);\r\n\t}\r\n\r\n\tcenter(center: boolean = true): void {\r\n\t\tthis.setMode(this.scaleMode, center);\r\n\t}\r\n\r\n\tresize(): void {\r\n\t\tthis.update();\r\n\t}\r\n\r\n\tstop() {\r\n\t\tthis.unlisten();\r\n\t}\r\n\r\n\tprivate scaleTo(width: number, height: number): void {\r\n\t\tthis.scaleMode = 'none';\r\n\t\tthis.stage.canvas.width = width;\r\n\t\tthis.stage.canvas.height = height;\r\n\t\tthis.stage.renderer.resize();\r\n\t}\r\n\r\n\tprivate scaleFit(viewPort: IBlock): void {\r\n\t\tthis.stage.canvas.width = viewPort.width;\r\n\t\tthis.stage.canvas.height = viewPort.height;\r\n\t\tthis.stage.renderer.resize();\r\n\t}\r\n\r\n\tprivate scaleAspect(viewPort: IBlock): void {\r\n\t\tvar ratio = Math.min(viewPort.width / this.stage.width, viewPort.height / this.stage.height);\r\n\t\tthis.stage.canvas.width = Math.floor(this.stage.width * ratio);\r\n\t\tthis.stage.canvas.height = Math.floor(this.stage.height * ratio);\r\n\t\tthis.stage.renderer.resize();\r\n\t}\r\n\r\n\tprivate moveScreenTo(x: number, y: number): void {\r\n\t\tthis.stage.canvas.style.left = x + 'px';\r\n\t\tthis.stage.canvas.style.top = y + 'px';\r\n\t}\r\n\r\n\tprivate moveScreenCenter(viewPort: IBlock): void {\r\n\t\tthis.moveScreenTo(Math.floor((viewPort.width - this.stage.canvas.width) / 2),\r\n\t\t\tMath.floor((viewPort.height - this.stage.canvas.height) / 2));\r\n\t}\r\n\r\n\tprivate listen(): void {\r\n\t\tthis.unlisten();\r\n\t\tif (this.centerView || this.scaleMode === 'fit') {\r\n\t\t\twindow.addEventListener('resize', this.update);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate unlisten(): void {\r\n\t\twindow.removeEventListener('resize', this.update);\r\n\t}\r\n\r\n\tprivate setMode(mode: any, center: boolean): void {\r\n\t\tassertMode(mode);\r\n\r\n\t\tthis.scaleMode = mode;\r\n\r\n\t\tvar multi = parseInt(this.scaleMode, 10);\r\n\t\tif (!isNaN(multi)) {\r\n\t\t\tthis.scaleMode = multi;\r\n\t\t\tthis.scaleTo(Math.floor(this.stage.width * multi), Math.floor(this.stage.height * multi));\r\n\t\t\tthis.unlisten();\r\n\t\t}\r\n\t\tif (this.scaleMode === 'fit') {\r\n\t\t\tthis.moveScreenTo(0, 0);\r\n\t\t}\r\n\t\tif (center || this.scaleMode === 'fit' || this.scaleMode === 'max') {\r\n\t\t\tthis.listen();\r\n\t\t}\r\n\t\tthis.update();\r\n\t}\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\n\r\nimport IRenderer = require('../types/IRenderer');\r\n\r\nfunction clearAlpha(data: Uint8Array) {\r\n\tvar lim = data.length;\r\n\tfor (var i = 3; i < lim; i++) {\r\n\t\tdata[i] = 255;\r\n\t}\r\n}\r\n\r\n// basic renderer with nearest-neighbour\r\nclass CanvasRender implements IRenderer {\r\n\r\n\tprivate canvas: HTMLCanvasElement;\r\n\tprivate width: number;\r\n\tprivate height: number;\r\n\tprivate channels: number;\r\n\tprivate px: Uint8ClampedArray;\r\n\tprivate ctx: CanvasRenderingContext2D;\r\n\tprivate output: ImageData;\r\n\r\n\tconstructor(bitmap: Bitmap, canvas: HTMLCanvasElement) {\r\n\t\tthis.canvas = canvas;\r\n\r\n\t\tthis.px = bitmap.data;\r\n\t\tthis.width = bitmap.width;\r\n\t\tthis.height = bitmap.height;\r\n\t\tthis.channels = bitmap.useAlpha ? 4 : 3;\r\n\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\r\n\t\t// get canvas-sized image data\r\n\t\tthis.output = this.ctx.createImageData(this.canvas.width, this.canvas.height);\r\n\r\n\t\t// set the alpha channel to visible\r\n\t\tclearAlpha(this.output.data);\r\n\r\n\t\tthis.ctx.putImageData(this.output, 0, 0);\r\n\t}\r\n\r\n\tresize(): void {\r\n\t\tif (this.output.width !== this.canvas.width || this.output.height !== this.canvas.height) {\r\n\t\t\tthis.output = this.ctx.createImageData(this.canvas.width, this.canvas.height);\r\n\t\t\t// set the alpha channel to visible\r\n\t\t\tclearAlpha(this.output.data);\r\n\t\t}\r\n\t}\r\n\r\n\tupdate(): void {\r\n\t\tvar data = this.output.data;\r\n\t\tvar width = this.output.width;\r\n\t\tvar height = this.output.height;\r\n\r\n\t\tvar fx = this.width / width;\r\n\t\tvar fy = this.height / height;\r\n\r\n\t\tfor (var iy = 0; iy < height; iy++) {\r\n\t\t\tfor (var ix = 0; ix < width; ix++) {\r\n\t\t\t\tvar x = Math.floor(ix * fx);\r\n\t\t\t\tvar y = Math.floor(iy * fy);\r\n\t\t\t\tvar read = (x + y * this.width) * this.channels;\r\n\t\t\t\tvar write = (ix + iy * width) * 4;\r\n\r\n\t\t\t\tdata[write] = this.px[read];\r\n\t\t\t\tdata[write + 1] = this.px[read + 1];\r\n\t\t\t\tdata[write + 2] = this.px[read + 2];\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.ctx.putImageData(this.output, 0, 0);\r\n\t}\r\n\r\n\tdestruct(): void {\r\n\t\tthis.px = null;\r\n\t\tthis.ctx = null;\r\n\t\tthis.canvas = null;\r\n\t\tthis.output = null;\r\n\t}\r\n}\r\n\r\nexport = CanvasRender;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport IRenderer = require('../types/IRenderer');\r\n\r\nvar vertexShaderSource = [\r\n\t// refer the vertices and texture coordinates\r\n\t'attribute vec2 a_position;',\r\n\t'attribute vec2 a_texCoord;',\r\n\r\n\t// passed to fragment shader\r\n\t'varying vec2 v_texCoord;',\r\n\r\n\t'void main() {',\r\n\t// simple transform\r\n\t'    gl_Position = vec4(a_position, 0, 1);',\r\n\t// interpolated value\r\n\t'    v_texCoord = a_texCoord;',\r\n\t'}'\r\n].join('\\n');\r\n\r\nvar fragmentShaderSource = [\r\n\t// config something (cargo-cult from tutorial)\r\n\t'precision mediump float;',\r\n\r\n\t// texture sampler (number 0)\r\n\t'uniform sampler2D u_image;',\r\n\r\n\t// interpolated value from vertex shader\r\n\t'varying vec2 v_texCoord;',\r\n\r\n\t'void main() {',\r\n\t// sample texture on the interpolated value; nearest-neighbour etc was configured earlier\r\n\t'    gl_FragColor = texture2D(u_image, v_texCoord);',\r\n\t'}'\r\n].join('\\n');\r\n\r\nfunction loadShader(gl, shaderSource, shaderType) {\r\n\tvar shader = gl.createShader(shaderType);\r\n\tgl.shaderSource(shader, shaderSource);\r\n\tgl.compileShader(shader);\r\n\r\n\t// check if it worked (cargo-cult from tutorial)\r\n\tvar compiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n\tif (!compiled) {\r\n\t\tthrow new Error('error compiling shader \"' + shader + '\":' + gl.getShaderInfoLog(shader));\r\n\t}\r\n\treturn shader;\r\n}\r\n\r\nclass WebGLRender implements IRenderer {\r\n\r\n\tprivate canvas: HTMLCanvasElement;\r\n\tprivate width: number;\r\n\tprivate height: number;\r\n\tprivate px: Uint8Array;\r\n\r\n\tprivate gl: WebGLRenderingContext;\r\n\tprivate positionLocation: number;\r\n\tprivate texCoordLocation: number;\r\n\tprivate positionBuffer: WebGLBuffer;\r\n\tprivate texCoordBuffer: WebGLBuffer;\r\n\tprivate texture: WebGLTexture;\r\n\r\n\tconstructor(bitmap: Bitmap, canvas: HTMLCanvasElement) {\r\n\t\tthis.canvas = canvas;\r\n\t\tthis.width = bitmap.width;\r\n\t\tthis.height = bitmap.height;\r\n\r\n\t\tif (!bitmap.buffer || !Uint8Array) {\r\n\t\t\tthrow new Error('bitmap doesn\\'t support buffer operations');\r\n\t\t}\r\n\r\n\t\t// use a Uint8Array view for WebGL compatibility\r\n\t\tthis.px = new Uint8Array(bitmap.buffer);\r\n\r\n\t\t// cheap check\r\n\t\tif (!window.WebGLRenderingContext) {\r\n\t\t\tthrow new Error('browser does not support WegGL');\r\n\t\t}\r\n\r\n\t\t// let's not bother with alpha on main canvas\r\n\t\tvar glOpts = {alpha: false};\r\n\r\n\t\t/* tslint:disable:no-duplicate-variable */\r\n\r\n\t\t// lazy alias to local var to keep code clear, also do fancy context lookup\r\n\t\tvar gl = this.gl = this.canvas.getContext('webgl', glOpts) || this.canvas.getContext('experimental-webgl', glOpts);\r\n\t\tif (!gl) {\r\n\t\t\tthrow new Error('could not create WebGL context');\r\n\t\t}\r\n\r\n\t\t/* tslint:enable:no-duplicate-variable */\r\n\r\n\t\t// setup a GLSL program\r\n\t\tvar program = gl.createProgram();\r\n\r\n\t\t// add shaders\r\n\t\tgl.attachShader(program, loadShader(gl, vertexShaderSource, gl.VERTEX_SHADER));\r\n\t\tgl.attachShader(program, loadShader(gl, fragmentShaderSource, gl.FRAGMENT_SHADER));\r\n\t\tgl.linkProgram(program);\r\n\r\n\t\t// check the link status (cargo-cult from tutorial)\r\n\t\tvar linked = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n\t\tif (!linked) {\r\n\t\t\t// something went wrong with the link\r\n\t\t\tthrow new Error(('error in program linking:' + gl.getProgramInfoLog(program)));\r\n\t\t}\r\n\t\tgl.useProgram(program);\r\n\r\n\t\t// shader variables that refer to the vertices and texture coordinates\r\n\t\tthis.positionLocation = gl.getAttribLocation(program, 'a_position');\r\n\t\tthis.texCoordLocation = gl.getAttribLocation(program, 'a_texCoord');\r\n\r\n\t\t// setup vertices\r\n\t\tthis.positionBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.positionBuffer);\r\n\r\n\t\tgl.enableVertexAttribArray(this.positionLocation);\r\n\t\tgl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n\t\t// upload vertices for 2 triangles in 2D: 3 x 2 x 2 elements\r\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\r\n\t\t\t-1.0, -1.0,\r\n\t\t\t1.0, -1.0,\r\n\t\t\t-1.0, 1.0,\r\n\t\t\t-1.0, 1.0,\r\n\t\t\t1.0, -1.0,\r\n\t\t\t1.0, 1.0\r\n\t\t]), gl.STATIC_DRAW);\r\n\r\n\t\t// setup texture coordinates\r\n\t\tthis.texCoordBuffer = gl.createBuffer();\r\n\t\tgl.bindBuffer(gl.ARRAY_BUFFER, this.texCoordBuffer);\r\n\r\n\t\tgl.enableVertexAttribArray(this.texCoordLocation);\r\n\t\tgl.vertexAttribPointer(this.texCoordLocation, 2, gl.FLOAT, false, 0, 0);\r\n\r\n\t\t// upload texture coordinates matching the vertices\r\n\t\tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array([\r\n\t\t\t0.0, 1.0,\r\n\t\t\t1.0, 1.0,\r\n\t\t\t0.0, 0.0,\r\n\t\t\t0.0, 0.0,\r\n\t\t\t1.0, 1.0,\r\n\t\t\t1.0, 0.0\r\n\t\t]), gl.STATIC_DRAW);\r\n\r\n\t\t// create a texture\r\n\t\tthis.texture = gl.createTexture();\r\n\t\tgl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n\r\n\t\t// set the parameters so we can render any size image\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n\r\n\t\t// clear the back buffer (with alpha)\r\n\t\tgl.clearColor(0, 0, 0, 1);\r\n\t\tgl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n\t\t// turn off rendering to alpha\r\n\t\tgl.colorMask(true, true, true, false);\r\n\r\n\t\t// apply size\r\n\t\tgl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\t}\r\n\r\n\tresize(): void {\r\n\t\tthis.gl.viewport(0, 0, this.canvas.width, this.canvas.height);\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\t}\r\n\r\n\tupdate(): void {\r\n\t\t// upload the pixels to the texture.\r\n\t\tthis.gl.texImage2D(this.gl.TEXTURE_2D, 0, this.gl.RGB, this.width, this.height, 0, this.gl.RGB, this.gl.UNSIGNED_BYTE, this.px);\r\n\t\t// render state\r\n\t\tthis.gl.drawArrays(this.gl.TRIANGLES, 0, 6);\r\n\t}\r\n\r\n\tdestruct(): void {\r\n\t\tthis.gl.clear(this.gl.COLOR_BUFFER_BIT);\r\n\t\t// TODO what else? how unload WebGL?\r\n\t\tthis.gl = null;\r\n\t\tthis.px = null;\r\n\t\tthis.canvas = null;\r\n\t}\r\n}\r\n\r\nexport = WebGLRender;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Font = require('../core/Font');\r\n/**\r\n * Based off of a Gist of a 4x4 font by Martin Holzhauer:\r\n * https://gist.github.com/woodworker/7696835\r\n *\r\n * Features fairly significant modifications to fit characters into smaller horizontal space by @noffle\r\n *\r\n * Expanded with numerals and special characters by @bartvds\r\n */\r\n\r\nvar font = new Font('micro', 4, {\r\n\t'0': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'1': [\r\n\t\t'01',\r\n\t\t'11',\r\n\t\t'01',\r\n\t\t'01'\r\n\t],\r\n\t'2': [\r\n\t\t'110',\r\n\t\t'001',\r\n\t\t'010',\r\n\t\t'111'\r\n\t],\r\n\t'3': [\r\n\t\t'111',\r\n\t\t'011',\r\n\t\t'001',\r\n\t\t'111'\r\n\t],\r\n\t'4': [\r\n\t\t'100',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'010'\r\n\t],\r\n\t'5': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'011'\r\n\t],\r\n\t'6': [\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'7': [\r\n\t\t'111',\r\n\t\t'001',\r\n\t\t'010',\r\n\t\t'010'\r\n\t],\r\n\t'8': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'111'\r\n\t],\r\n\t'9': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'001'\r\n\t],\r\n\t'A': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'101'\r\n\t],\r\n\t'B': [\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'C': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'100',\r\n\t\t'111'\r\n\t],\r\n\t'D': [\r\n\t\t'110',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'110'\r\n\t],\r\n\t'E': [\r\n\t\t'111',\r\n\t\t'110',\r\n\t\t'100',\r\n\t\t'111'\r\n\t],\r\n\t'F': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'110',\r\n\t\t'100'\r\n\t],\r\n\t'G': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'H': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'101'\r\n\t],\r\n\t'I': [\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'1'\r\n\t],\r\n\t'J': [\r\n\t\t'001',\r\n\t\t'001',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'K': [\r\n\t\t'101',\r\n\t\t'110',\r\n\t\t'101',\r\n\t\t'101'\r\n\t],\r\n\t'L': [\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'11'\r\n\t],\r\n\t'M': [\r\n\t\t'11011',\r\n\t\t'11011',\r\n\t\t'10101',\r\n\t\t'10001'\r\n\t],\r\n\t'N': [\r\n\t\t'1001',\r\n\t\t'1101',\r\n\t\t'1011',\r\n\t\t'1001'\r\n\t],\r\n\t'O': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'P': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'100'\r\n\t],\r\n\t'Q': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'111',\r\n\t\t'001'\r\n\t],\r\n\t'R': [\r\n\t\t'111',\r\n\t\t'101',\r\n\t\t'100',\r\n\t\t'100'\r\n\t],\r\n\t'S': [\r\n\t\t'111',\r\n\t\t'100',\r\n\t\t'111',\r\n\t\t'011'\r\n\t],\r\n\t'T': [\r\n\t\t'111',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'010'\r\n\t],\r\n\t'U': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'111'\r\n\t],\r\n\t'V': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'010'\r\n\t],\r\n\t'W': [\r\n\t\t'10001',\r\n\t\t'10001',\r\n\t\t'10101',\r\n\t\t'01110'\r\n\t],\r\n\t'X': [\r\n\t\t'101',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'101'\r\n\t],\r\n\t'Y': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'010',\r\n\t\t'010'\r\n\t],\r\n\t'Z': [\r\n\t\t'111',\r\n\t\t'011',\r\n\t\t'100',\r\n\t\t'111'\r\n\t],\r\n\t' ': [\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'0'\r\n\t],\r\n\t'!': [\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'0',\r\n\t\t'1'\r\n\t],\r\n\t'?': [\r\n\t\t'111',\r\n\t\t'001',\r\n\t\t'000',\r\n\t\t'010'\r\n\t],\r\n\t'.': [\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'1'\r\n\t],\r\n\t',': [\r\n\t\t'0',\r\n\t\t'0',\r\n\t\t'1',\r\n\t\t'1'\r\n\t],\r\n\t'+': [\r\n\t\t'000',\r\n\t\t'010',\r\n\t\t'111',\r\n\t\t'010'\r\n\t],\r\n\t'-': [\r\n\t\t'00',\r\n\t\t'00',\r\n\t\t'11',\r\n\t\t'00'\r\n\t],\r\n\t'=': [\r\n\t\t'000',\r\n\t\t'111',\r\n\t\t'000',\r\n\t\t'111'\r\n\t],\r\n\t'*': [\r\n\t\t'000',\r\n\t\t'101',\r\n\t\t'010',\r\n\t\t'101'\r\n\t],\r\n\t'_': [\r\n\t\t'000',\r\n\t\t'000',\r\n\t\t'000',\r\n\t\t'111'\r\n\t],\r\n\t'[': [\r\n\t\t'11',\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'11'\r\n\t],\r\n\t']': [\r\n\t\t'11',\r\n\t\t'01',\r\n\t\t'01',\r\n\t\t'11'\r\n\t],\r\n\t'(': [\r\n\t\t'01',\r\n\t\t'10',\r\n\t\t'10',\r\n\t\t'01'\r\n\t],\r\n\t')': [\r\n\t\t'10',\r\n\t\t'01',\r\n\t\t'01',\r\n\t\t'10'\r\n\t],\r\n\t'<': [\r\n\t\t'00',\r\n\t\t'01',\r\n\t\t'10',\r\n\t\t'01'\r\n\t],\r\n\t'>': [\r\n\t\t'00',\r\n\t\t'10',\r\n\t\t'01',\r\n\t\t'10'\r\n\t],\r\n\t'\\'': [\r\n\t\t'1',\r\n\t\t'1',\r\n\t\t'0',\r\n\t\t'0'\r\n\t],\r\n\t'\"': [\r\n\t\t'101',\r\n\t\t'101',\r\n\t\t'000',\r\n\t\t'000'\r\n\t],\r\n\t'`': [\r\n\t\t'10',\r\n\t\t'01',\r\n\t\t'00',\r\n\t\t'00'\r\n\t],\r\n\t'~': [\r\n\t\t'000',\r\n\t\t'110',\r\n\t\t'011',\r\n\t\t'000'\r\n\t],\r\n\t'/': [\r\n\t\t'001',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'100'\r\n\t],\r\n\t'\\\\': [\r\n\t\t'100',\r\n\t\t'010',\r\n\t\t'010',\r\n\t\t'001'\r\n\t]\r\n});\r\n\r\nexport = font;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport ILoader = require('./ILoader');\r\n\r\nclass ImageDataLoader implements ILoader {\r\n\tpublic url: string;\r\n\r\n\tconstructor(url: string) {\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tload(callback: (err: Error, data: ImageData) => void): void {\r\n\t\tvar image = document.createElement('img');\r\n\t\timage.onload = () => {\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tcanvas.width = image.width;\r\n\t\t\tcanvas.height = image.height;\r\n\r\n\t\t\tvar ctx = canvas.getContext('2d');\r\n\t\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\t\tcallback(null, ctx.getImageData(0, 0, image.width, image.height));\r\n\r\n\t\t\timage.onload = null;\r\n\t\t\timage.onerror = null;\r\n\t\t};\r\n\t\timage.onerror = () => {\r\n\t\t\tcallback(new Error('cannot load ' + this.url), null);\r\n\r\n\t\t\timage.onload = null;\r\n\t\t\timage.onerror = null;\r\n\t\t};\r\n\t\t// load it\r\n\t\timage.src = this.url;\r\n\t}\r\n}\r\n\r\nexport = ImageDataLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\n\r\nimport ILoader = require('./ILoader');\r\nimport ImageDataLoader = require('./ImageDataLoader');\r\n\r\nclass BitmapLoader implements ILoader {\r\n\tpublic url: string;\r\n\tpublic useAlpha: boolean;\r\n\r\n\tconstructor(url: string, useAlpha: boolean = false) {\r\n\t\tthis.url = url;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t}\r\n\r\n\tload(callback: (err: Error, bitmap: Bitmap) => void): void {\r\n\t\tnew ImageDataLoader(this.url).load((err, image) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (this.useAlpha) {\r\n\t\t\t\tcallback(null, new Bitmap(image.width, image.height, true, image.data.buffer));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t// resample, ditch alpha\r\n\t\t\t\tvar bitmap = new Bitmap(image.width, image.height, false);\r\n\t\t\t\tvar data = image.data;\r\n\t\t\t\tvar width = image.width;\r\n\r\n\t\t\t\tfor (var iy = 0; iy < image.height; iy++) {\r\n\t\t\t\t\tfor (var ix = 0; ix < width; ix++) {\r\n\t\t\t\t\t\tvar read = (iy * width + ix) * 4;\r\n\t\t\t\t\t\tvar write = (iy * width + ix) * 3;\r\n\r\n\t\t\t\t\t\tbitmap.data[write] = data[read];\r\n\t\t\t\t\t\tbitmap.data[write + 1] = data[read + 1];\r\n\t\t\t\t\t\tbitmap.data[write + 2] = data[read + 2];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcallback(null, bitmap);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = BitmapLoader;\r\n","/// <reference path='../../typings/tsd.d.ts' />\r\n\r\n'use strict';\r\n\r\nimport xhr = require('xhr');\r\n\r\nimport ILoader = require('./ILoader');\r\n\r\nclass TextLoader implements ILoader {\r\n\tpublic url: string;\r\n\r\n\tconstructor(url: string) {\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tload(callback: (err: Error, data: string) => void): void {\r\n\t\txhr({\r\n\t\t\turi: this.url\r\n\t\t}, function (err, resp, body) {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcallback(null, body);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = TextLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport ILoader = require('./ILoader');\r\nimport TextLoader = require('./TextLoader');\r\n\r\nclass JSONLoader implements ILoader {\r\n\tpublic url: string;\r\n\r\n\tconstructor(url: string) {\r\n\t\tthis.url = url;\r\n\t}\r\n\r\n\tload(callback: (err: Error, json: any) => void): void {\r\n\t\tnew TextLoader(this.url).load((err, text) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\ttry {\r\n\t\t\t\tvar obj = JSON.parse(text);\r\n\t\t\t}\r\n\t\t\tcatch (e) {\r\n\t\t\t\tcallback(e, null);\r\n\t\t\t}\r\n\t\t\tcallback(null, obj);\r\n\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = JSONLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport SpriteSheet = require('../core/SpriteSheet');\r\n\r\nimport ILoader = require('./ILoader');\r\nimport ImageDataLoader = require('./ImageDataLoader');\r\nimport ISpriteSheetOpts = require('../types/ISpriteSheetOpts');\r\n\r\nclass SpriteSheetLoader implements ILoader {\r\n\tpublic url: string;\r\n\tpublic useAlpha: boolean;\r\n\tpublic opts: ISpriteSheetOpts;\r\n\r\n\tconstructor(url: string, opts: ISpriteSheetOpts, useAlpha: boolean = false) {\r\n\t\tthis.url = url;\r\n\t\tthis.opts = opts;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t}\r\n\r\n\tload(callback: (err: Error, bitmap: SpriteSheet) => void): void {\r\n\t\tnew ImageDataLoader(this.url).load((err: Error, image: ImageData) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// TODO limit total sprites when sheet not fully filled\r\n\r\n\t\t\t/* tslint:disable: max-line-length */\r\n\r\n\t\t\tvar outerMargin = (this.opts.outerMargin || 0);\r\n\t\t\tvar innerMargin = (this.opts.innerMargin || 0);\r\n\r\n\t\t\tvar sheet = new SpriteSheet(this.opts.spritesX, this.opts.spritesY);\r\n\r\n\t\t\tfor (var iy = 0; iy < this.opts.spritesY; iy++) {\r\n\t\t\t\tfor (var ix = 0; ix < this.opts.spritesX; ix++) {\r\n\t\t\t\t\tvar x = outerMargin + ix * (this.opts.sizeX + innerMargin);\r\n\t\t\t\t\tvar y = outerMargin + iy * (this.opts.sizeY + innerMargin);\r\n\t\t\t\t\tsheet.addSprite(Bitmap.clipFromData(image.data, image.width, image.height, 4, x, y, this.opts.sizeX, this.opts.sizeY, this.useAlpha));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcallback(null, sheet);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = SpriteSheetLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\nimport SpriteSheet = require('../core/SpriteSheet');\r\nimport ILoader = require('./ILoader');\r\nimport JSONLoader = require('./JSONLoader');\r\nimport SpriteSheetLoader = require('./SpriteSheetLoader');\r\nimport ISpriteSheetOpts = require('../types/ISpriteSheetOpts');\r\n\r\nvar urlExp = /^(.*?)(\\/?)([^\\/]+?)$/;\r\n\r\nfunction getURL(main: string, append: string): string {\r\n\turlExp.lastIndex = 0;\r\n\tvar match = urlExp.exec(main);\r\n\treturn match[1] + match[2] + append;\r\n}\r\n\r\n\r\nclass SpriteSheetJSONLoader implements ILoader {\r\n\tpublic url: string;\r\n\tpublic useAlpha: boolean;\r\n\tpublic opts: ISpriteSheetOpts;\r\n\r\n\tconstructor(url: string, useAlpha: boolean = false) {\r\n\t\tthis.url = url;\r\n\t\tthis.useAlpha = useAlpha;\r\n\t}\r\n\r\n\tload(callback: (err: Error, sheet: SpriteSheet) => void): void {\r\n\t\tnew JSONLoader(this.url).load((err, json: ISpriteSheetOpts) => {\r\n\t\t\tif (err) {\r\n\t\t\t\tcallback(err, null);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tnew SpriteSheetLoader(getURL(this.url, json.image), json, this.useAlpha).load(callback);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = SpriteSheetJSONLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport ILoader = require('./ILoader');\r\n\r\nclass MultiLoader {\r\n\tprivate queued: ILoader[] = [];\r\n\r\n\tconstructor(loaders?: ILoader[]) {\r\n\t\tif (loaders) {\r\n\t\t\tloaders.forEach((loader) => {\r\n\t\t\t\tthis.queued.push(loader);\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tload(callback: (err: Error, results: any[]) => void): void {\r\n\t\tvar errored = false;\r\n\t\tvar results = new Array(this.queued.length);\r\n\r\n\t\t// TODO consider sanity limit?\r\n\r\n\t\tthis.queued.forEach((loader, index) => {\r\n\t\t\tloader.load((err, res) => {\r\n\t\t\t\tif (errored) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tconsole.log(loader.url);\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\tcallback(err, null);\r\n\t\t\t\t\terrored = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tresults[index] = res;\r\n\t\t\t\tthis.queued[index] = null;\r\n\r\n\t\t\t\tif (this.queued.every(loader => !loader)) {\r\n\t\t\t\t\tcallback(err, results);\r\n\t\t\t\t\tthis.queued = null;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = MultiLoader;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport IBlock = require('./../types/IBlock');\r\n\r\n// helper ripped from https://stackoverflow.com/questions/15451321/how-can-i-make-html5-javascript-canvas-fill-window-screen\r\nexport function getViewport(): IBlock {\r\n\tvar e: any = window;\r\n\tvar a = 'inner';\r\n\tif (!('innerWidth' in window )) {\r\n\t\ta = 'client';\r\n\t\te = document.documentElement || document.body;\r\n\t}\r\n\treturn {width: e[a + 'Width'], height: e[a + 'Height']};\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Bitmap = require('../core/Bitmap');\r\n\r\n// TODO support arbitrary offsets and clipping\r\n\r\nclass SpriteSheet {\r\n\r\n\tprivate sprites: Bitmap[] = [];\r\n\tprivate width: number;\r\n\tprivate height: number;\r\n\r\n\tconstructor(width: number, height: number) {\r\n\t\tthis.width = width;\r\n\t\tthis.height = height;\r\n\t}\r\n\r\n\tgetSprite(x: number, y: number): Bitmap {\r\n\t\treturn this.getSpriteAt(y * this.width + x);\r\n\t}\r\n\r\n\tgetSpriteAt(index: number): Bitmap {\r\n\t\tif (this.sprites.length === 0) {\r\n\t\t\tthrow new Error('sheet has zero images');\r\n\t\t}\r\n\t\treturn this.sprites[index % this.sprites.length];\r\n\t}\r\n\r\n\taddSprite(bitmap: Bitmap): void {\r\n\t\tthis.sprites.push(bitmap);\r\n\t}\r\n}\r\n\r\nexport = SpriteSheet;\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nimport Char = require('./Char');\r\n\r\nclass Font {\r\n\tpublic name: string;\r\n\tpublic height: number;\r\n\tpublic chars: {[char: string]: Char};\r\n\r\n\t// TODO assert height\r\n\r\n\tconstructor(name: string, height: number, data: Object) {\r\n\t\tthis.name = name;\r\n\t\tthis.height = height;\r\n\t\tthis.chars = Object.create(null);\r\n\r\n\t\tObject.keys(data).forEach((char) => {\r\n\t\t\tthis.chars[char] = new Char(char, data[char]);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport = Font;\r\n","var window = require(\"global/window\")\nvar once = require(\"once\")\n\nvar messages = {\n    \"0\": \"Internal XMLHttpRequest Error\",\n    \"4\": \"4xx Client Error\",\n    \"5\": \"5xx Server Error\"\n}\n\nvar XHR = window.XMLHttpRequest || noop\nvar XDR = \"withCredentials\" in (new XHR()) ?\n        window.XMLHttpRequest : window.XDomainRequest\n\nmodule.exports = createXHR\n\nfunction createXHR(options, callback) {\n    if (typeof options === \"string\") {\n        options = { uri: options }\n    }\n\n    options = options || {}\n    callback = once(callback)\n\n    var xhr = options.xhr || null\n\n    if (!xhr && options.cors) {\n        xhr = new XDR()\n    } else if (!xhr) {\n        xhr = new XHR()\n    }\n\n    var uri = xhr.url = options.uri || options.url;\n    var method = xhr.method = options.method || \"GET\"\n    var body = options.body || options.data\n    var headers = xhr.headers = options.headers || {}\n    var sync = !!options.sync\n    var isJson = false\n    var key\n\n    if (\"json\" in options) {\n        isJson = true\n        headers[\"Accept\"] = \"application/json\"\n        if (method !== \"GET\" && method !== \"HEAD\") {\n            headers[\"Content-Type\"] = \"application/json\"\n            body = JSON.stringify(options.json)\n        }\n    }\n\n    xhr.onreadystatechange = readystatechange\n    xhr.onload = load\n    xhr.onerror = error\n    // IE9 must have onprogress be set to a unique function.\n    xhr.onprogress = function () {\n        // IE must die\n    }\n    // hate IE\n    xhr.ontimeout = noop\n    xhr.open(method, uri, !sync)\n    if (options.cors) {\n        xhr.withCredentials = true\n    }\n    // Cannot set timeout with sync request\n    if (!sync) {\n        xhr.timeout = \"timeout\" in options ? options.timeout : 5000\n    }\n\n    if (xhr.setRequestHeader) {\n        for(key in headers){\n            if(headers.hasOwnProperty(key)){\n                xhr.setRequestHeader(key, headers[key])\n            }\n        }\n    }\n\n    if (\"responseType\" in options) {\n        xhr.responseType = options.responseType\n    }\n\n    xhr.send(body)\n\n    return xhr\n\n    function readystatechange() {\n        if (xhr.readyState === 4) {\n            load()\n        }\n    }\n\n    function load() {\n        var error = null\n        var status = xhr.statusCode = xhr.status\n        // Chrome with requestType=blob throws errors arround when even testing access to responseText\n        var body = null\n\n        if (xhr.response) {\n            body = xhr.body = xhr.response\n        } else if (xhr.responseType === 'text' || xhr.responseType === '') {\n            body = xhr.body = xhr.responseText || xhr.responseXML\n        }\n\n        if (status === 1223) {\n            status = 204\n        }\n\n        if (status === 0 || (status >= 400 && status < 600)) {\n            var message = (typeof body === \"string\" ? body : false) ||\n                messages[String(xhr.status).charAt(0)]\n            error = new Error(message)\n\n            error.statusCode = xhr.status\n        }\n\n        if (isJson) {\n            try {\n                body = xhr.body = JSON.parse(body)\n            } catch (e) {}\n        }\n\n        callback(error, xhr, body)\n    }\n\n    function error(evt) {\n        callback(evt, xhr)\n    }\n}\n\n\nfunction noop() {}\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n'use strict';\r\n\r\nclass Char {\r\n\tpublic char: string;\r\n\tpublic width: number;\r\n\tpublic map: boolean[];\r\n\r\n\t// TODO assert line width\r\n\tconstructor(char: string, map: string[]) {\r\n\t\tthis.char = char;\r\n\t\tthis.width = map[0].length;\r\n\t\tthis.map = [];\r\n\r\n\t\tfor (var i = 0; i < map.length; i++) {\r\n\t\t\tvar line = map[i];\r\n\t\t\tfor (var c = 0; c < line.length; c++) {\r\n\t\t\t\tthis.map.push((line.charAt(c) === '1'));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport = Char;\r\n","if (typeof window !== \"undefined\") {\n    module.exports = window\n} else if (typeof global !== \"undefined\") {\n    module.exports = global\n} else {\n    module.exports = {}\n}\n","module.exports = once\n\nonce.proto = once(function () {\n  Object.defineProperty(Function.prototype, 'once', {\n    value: function () {\n      return once(this)\n    },\n    configurable: true\n  })\n})\n\nfunction once (fn) {\n  var called = false\n  return function () {\n    if (called) return\n    called = true\n    return fn.apply(this, arguments)\n  }\n}\n"],"sourceRoot":"webpack-module://"}