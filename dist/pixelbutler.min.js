!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.pixelbutler=e():t.pixelbutler=e()}(this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t,r,n){return new e.RGBA(t,r,n)}function i(t,r,n){return b.h=t,b.s=r,b.v=n,e.hsv2rgb(b)}function o(){return!!(window&&window.WebGLRenderingContext&&ArrayBuffer&&Uint8Array&&Uint8ClampedArray)}var a=r(1);e.Stage=a;var s=r(2);e.Bitmap=s;var h=r(3);e.FPS=h;var u=r(4);e.RGBA=u;var f=r(5);e.HSV=f;var c=r(9);e.PerlinNoise=c;var p=r(10);e.loader=p;var l=r(6),d=l.rand;e.rand=d;var g=r(7),y=g.rgb2hsv;e.rgb2hsv=y;var w=g.hsv2rgb;e.hsv2rgb=w;var v=r(8);e.ticker=v,e.rgb=n;var b=new e.HSV;e.hsv=i,e.supportsWebGL=o,[e.loader,e.PerlinNoise,l,g,e.ticker,e.RGBA,e.HSV,e.Bitmap,e.FPS,e.Stage]},function(t,e,r){"use strict";var n=this.__extends||function(t,e){function r(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);r.prototype=e.prototype,t.prototype=new r},i=r(2),o=r(19),a=r(20),s=r(11),h=function(t){function e(e){if(t.call(this,e.width||32,e.height||32,!!e.transparent),this.canvas="string"==typeof e.canvas?document.getElementById(e.canvas):e.canvas,!this.canvas)throw new Error('cannot locate canvas with id "'+e.canvas+'"');if(this.clear(),"canvas"!==e.renderer)try{this.renderer=new a(this,this.canvas)}catch(r){console.log(r),console.log("render init error, switching to fallback")}this.renderer||(this.renderer=new o(this,this.canvas)),(e.center||e.scale)&&(this.autoSize=new s.AutoSize(this,{center:e.center,scale:e.scale}))}return n(e,t),e.prototype.resizeTo=function(e,r){(e!==this.width||r!==this.height)&&(t.prototype.resizeTo.call(this,e,r),this.autoSize&&this.autoSize.update())},e.prototype.render=function(){this.renderer.update()},e.prototype.destruct=function(){this.autoSize&&(this.autoSize.stop(),this.autoSize=null),this.renderer&&(this.renderer.destruct(),this.renderer=null),this.canvas=null},e}(i);t.exports=h},function(t,e,r){"use strict";var n=r(4),i=r(21),o=r(7),a=r(6),s=a.clamp,h=(new n(0,0,0,0),new n(0,0,0)),u=(new n(255,0,255),function(){function t(t,e,r,n){if("undefined"==typeof r&&(r=!1),"undefined"==typeof n&&(n=null),this.width=t,this.height=e,this.useAlpha=r,this.channels=r?4:3,n){var i=this.width*this.height*this.channels;if(n.byteLength!==i)throw new Error("bad raw data dimensions; expected "+i+", received "+n.byteLength);this.buffer=n,this.data=new Uint8ClampedArray(this.buffer)}else this._resetData()}return t.prototype._resetData=function(){this.buffer=new ArrayBuffer(this.width*this.height*this.channels),this.data=new Uint8ClampedArray(this.buffer)},t.prototype.resizeTo=function(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this._resetData())},t.prototype.setPixel=function(t,e,r){if(t=Math.floor(t),e=Math.floor(e),!(0>t||0>e||t>=this.width||e>=this.height)){var n=(t+e*this.width)*this.channels;this.data[n]=r.r,this.data[n+1]=r.g,this.data[n+2]=r.b}},t.prototype.getPixel=function(t,e,r){if(t=Math.floor(t),e=Math.floor(e),0>t||0>e||t>=this.width||e>=this.height)return null;r=r||new n;var i=(t+e*this.width)*this.channels;return r.r=this.data[i],r.g=this.data[i+1],r.b=this.data[i+2],r},t.prototype.fillRect=function(t,e,r,n,i){if(t=Math.floor(t),e=Math.floor(e),r=Math.floor(r),n=Math.floor(n),!(t>=this.width||e>=this.height||0>t+r||0>e+n)){var o=t,a=t+r,s=e,h=e+n;0>o&&(o=0),0>s&&(s=0),a>=this.width&&(a=this.width),h>=this.height&&(h=this.height);for(var u=s;h>u;u++)for(var f=o;a>f;f++){var c=(f+u*this.width)*this.channels;this.data[c]=i.r,this.data[c+1]=i.g,this.data[c+2]=i.b}}},t.prototype.drawLineH=function(t,e,r,n){var i=s(Math.floor(t+r),0,this.width);for(t=s(Math.floor(t),0,this.width),e=s(Math.floor(e),0,this.height);i>t;t++){var o=(t+e*this.width)*this.channels;this.data[o]=n.r,this.data[o+1]=n.g,this.data[o+2]=n.b}},t.prototype.drawLineV=function(t,e,r,n){var i=s(Math.floor(e+r),0,this.height);for(t=s(Math.floor(t),0,this.width),e=s(Math.floor(e),0,this.height);i>e;e++){var o=(t+e*this.width)*this.channels;this.data[o]=n.r,this.data[o+1]=n.g,this.data[o+2]=n.b}},t.prototype.drawRect=function(t,e,r,n,i){t=Math.floor(t),e=Math.floor(e),r=Math.floor(r),n=Math.floor(n),this.drawLineH(t,e,r,i),this.drawLineH(t,e+n-1,r,i),this.drawLineV(t,e,n,i),this.drawLineV(t+r-1,e,n,i)},t.prototype.fillCircle=function(t,e,r,n){t=Math.floor(t),e=Math.floor(e),r=Math.floor(r);for(var i=-r;r>=i;i++)for(var o=-r;r>=o;o++)if(!(0>t+o||0>e+i||t+o>=this.width||e+i>=this.height)&&r*r>=o*o+i*i){var a=(t+o+(e+i)*this.width)*this.channels;this.data[a]=n.r,this.data[a+1]=n.g,this.data[a+2]=n.b}},t.prototype.drawCircle=function(t,e,r,n){t=Math.floor(t),e=Math.floor(e),r=Math.floor(r);for(var i=0;360>i;i++){var o=Math.round(Math.cos(i*(Math.PI/180))*r)+t,a=Math.round(Math.sin(i*(Math.PI/180))*r)+e;if(!(0>o||0>a||o>=this.width||a>=this.height)){var s=(o+a*this.width)*this.channels;this.data[s]=n.r,this.data[s+1]=n.g,this.data[s+2]=n.b}}},t.prototype.shader=function(t){var e,r,i,o=new n;for(e=0;e<this.height;e++)for(r=0;r<this.width;r++){var a=(r+e*this.width)*this.channels;o.r=this.data[a],o.g=this.data[a+1],o.b=this.data[a+2],i=t(r,e,o),this.data[a]=i.r,this.data[a+1]=i.g,this.data[a+2]=i.b}},t.prototype.text=function(t,e,r,n){r=String(r);for(var i=0;i<r.length;i++)t+=this.drawChar(t,e,r.charAt(i),n)+1},t.prototype.drawChar=function(t,e,r,n){var o=i.chars[r.toUpperCase()];if(!o)return 0;for(var a=0;a<i.height;a++)for(var s=0;s<o.width;s++)o.map[a*o.width+s]&&this.setPixel(t+s,e+a,n);return o.width},t.prototype.blit=function(t,e,r){e=e?Math.floor(e):0,r=r?Math.floor(r):0;var n,i,o,a;if(!(e>=this.width||r>=this.height||e+t.width<0||r+t.height<0)){var s=e,h=e+t.width,u=r,f=r+t.height;if(0>s&&(s=0),0>u&&(u=0),h>=this.width&&(h=this.width),f>=this.height&&(f=this.height),t.useAlpha)for(n=u;f>n;n++)for(i=s;h>i;i++){o=(i-e+(n-r)*t.width)*t.channels,a=(i+n*this.width)*this.channels;var c=t.data[o+3]/255,p=1-c;this.data[a]=Math.round(this.data[a]*p+t.data[o]*c),this.data[a+1]=Math.round(this.data[a+1]*p+t.data[o+1]*c),this.data[a+2]=Math.round(this.data[a+2]*p+t.data[o+2]*c)}else for(n=u;f>n;n++)for(i=s;h>i;i++)o=(i-e+(n-r)*t.width)*t.channels,a=(i+n*this.width)*this.channels,this.data[a]=t.data[o],this.data[a+1]=t.data[o+1],this.data[a+2]=t.data[o+2]}},t.prototype.clear=function(t){t=t||h;var e,r;if(this.useAlpha&&o.useAlpha(t))for(e=this.width*this.height*4,r=0;e>r;r+=4)this.data[r]=t.r,this.data[r+1]=t.g,this.data[r+2]=t.b,this.data[r+3]=t.a;else for(e=this.width*this.height*this.channels,r=0;e>r;r+=this.channels)this.data[r]=t.r,this.data[r+1]=t.g,this.data[r+2]=t.b},t.prototype.clearAlpha=function(t){if("undefined"==typeof t&&(t=0),this.useAlpha)for(var e=this.width*this.height*4,r=3;e>r;r+=4)this.data[r]=t},t.clipFromData=function(e,r,n,i,o,a,s,h,u){var f,c,p,l,d=u?4:3,g=new Uint8Array(h*s*d);if(u)for(f=0;h>f;f++)for(c=0;s>c;c++)p=(c+o+(f+a)*r)*i,l=(c+f*s)*d,g[l]=e[p],g[l+1]=e[p+1],g[l+2]=e[p+2],g[l+3]=e[p+3];else for(f=0;h>f;f++)for(c=0;s>c;c++)p=(c+o+(f+a)*r)*i,l=(c+f*s)*d,g[l]=e[p],g[l+1]=e[p+1],g[l+2]=e[p+2];return new t(s,h,u,g)},t}());t.exports=u},function(t){"use strict";var e=function(){function t(t,e){"undefined"==typeof t&&(t=30),"undefined"==typeof e&&(e=2),this.tickHistory=[0],this.deltaHistory=[0],this.tickI=0,this.deltaI=0,this.smoothFPS=t,this.smoothDelta=e,this.previous=performance.now()}return t.prototype.begin=function(){var t=performance.now(),e=t-this.previous;this.tickHistory[this.tickI%this.smoothFPS]=e,this.tickI++,this.previous=t},t.prototype.end=function(){var t=performance.now(),e=t-this.previous;this.deltaHistory[this.deltaI%this.smoothDelta]=e,this.deltaI++},Object.defineProperty(t.prototype,"fps",{get:function(){for(var t=0,e=0;e<this.tickHistory.length;e++)t+=this.tickHistory[e];return Math.ceil(1e3/(t/this.tickHistory.length))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redraw",{get:function(){for(var t=0,e=0;e<this.deltaHistory.length;e++)t+=this.deltaHistory[e];return Math.ceil(t/this.deltaHistory.length)},enumerable:!0,configurable:!0}),t}();t.exports=e},function(t){"use strict";var e=function(){function t(t,e,r,n){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof r&&(r=0),"undefined"==typeof n&&(n=255),this.r=t,this.g=e,this.b=r,this.a=n}return t}();t.exports=e},function(t){"use strict";var e=function(){function t(t,e,r){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof r&&(r=0),this.h=t,this.s=e,this.v=r}return t}();t.exports=e},function(t,e){"use strict";function r(t){return Math.floor(Math.random()*t)}function n(t,e,r){return e>t?e:t>r?r:t}e.rand=r,e.clamp=n},function(t,e,r){"use strict";function n(t){return"number"==typeof t.a&&t.a<255}function i(t){var e,r,n,i,o,s,h,u,f=t.h,c=t.s,p=t.v;if(f=Math.max(0,Math.min(360,f)),c=Math.max(0,Math.min(100,c)),p=Math.max(0,Math.min(100,p)),c/=100,p/=100,0===c)return e=r=n=p,new a(Math.round(255*e),Math.round(255*r),Math.round(255*n));switch(f/=60,i=Math.floor(f),o=f-i,s=p*(1-c),h=p*(1-c*o),u=p*(1-c*(1-o)),i){case 0:e=p,r=u,n=s;break;case 1:e=h,r=p,n=s;break;case 2:e=s,r=p,n=u;break;case 3:e=s,r=h,n=p;break;case 4:e=u,r=s,n=p;break;default:e=p,r=s,n=h}return new a(Math.round(255*e),Math.round(255*r),Math.round(255*n))}function o(t){var e,r,n,i,o,a=t.r/255,h=t.g/255,u=t.b/255,f=Math.max(a,h,u),c=f-Math.min(a,h,u),p=function(t){return(f-t)/6/c+.5};return 0===c?i=o=0:(o=c/f,e=p(a),r=p(h),n=p(u),a===f?i=n-r:h===f?i=1/3+e-n:u===f&&(i=2/3+r-e),0>i?i+=1:i>1&&(i-=1)),new s(Math.round(360*i),Math.round(100*o),Math.round(100*f))}var a=r(4),s=r(5);e.useAlpha=n,e.hsv2rgb=i,e.rgb2hsv=o},function(t,e){"use strict";function r(t,e){function r(){if(n){i++;var e=performance.now();t(i,e-o),o=e}}var n=0,i=0,o=performance.now(),a={};return a.start=function(){n&&clearInterval(n),n=setInterval(r,1e3/e)},a.step=function(){r()},a.stop=function(){n&&(clearInterval(n),n=0)},a.isRunning=function(){return!!n},a}function n(t){function e(){if(n){i++;var r=performance.now();t(i,r-o),o=r,requestAnimationFrame(e)}}var r,n=!1,i=0,o=performance.now(),a={};return a.start=function(){n||(n=!0,r=requestAnimationFrame(e))},a.step=function(){e()},a.stop=function(){n&&(n=!1,cancelAnimationFrame(r))},a.isRunning=function(){return n},a}e.interval=r,e.request=n},function(t){var e=function(){function t(){this.permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.p=new Array(512);for(var t=0;256>t;t++)this.p[256+t]=this.p[t]=this.permutation[t]}return t.prototype.noise=function(t,e,r){var n=255&Math.floor(t),i=255&Math.floor(e),o=255&Math.floor(r);t-=Math.floor(t),e-=Math.floor(e),r-=Math.floor(r);var a=this.fade(t),s=this.fade(e),h=this.fade(r),u=this.p[n]+i,f=this.p[u]+o,c=this.p[u+1]+o,p=this.p[n+1]+i,l=this.p[p]+o,d=this.p[p+1]+o;return this.scale(this.lerp(h,this.lerp(s,this.lerp(a,this.grad(this.p[f],t,e,r),this.grad(this.p[l],t-1,e,r)),this.lerp(a,this.grad(this.p[c],t,e-1,r),this.grad(this.p[d],t-1,e-1,r))),this.lerp(s,this.lerp(a,this.grad(this.p[f+1],t,e,r-1),this.grad(this.p[l+1],t-1,e,r-1)),this.lerp(a,this.grad(this.p[c+1],t,e-1,r-1),this.grad(this.p[d+1],t-1,e-1,r-1)))))},t.prototype.fade=function(t){return t*t*t*(t*(6*t-15)+10)},t.prototype.lerp=function(t,e,r){return e+t*(r-e)},t.prototype.grad=function(t,e,r,n){var i=15&t,o=8>i?e:r,a=4>i?r:12==i||14==i?e:n;return(0==(1&i)?o:-o)+(0==(2&i)?a:-a)},t.prototype.scale=function(t){return(1+t)/2},t}();t.exports=e},function(t,e,r){var n=r(12);e.ImageDataLoader=n;var i=r(13);e.BitmapLoader=i;var o=r(14);e.TextLoader=o;var a=r(15);e.JSONLoader=a;var s=r(16);e.SpriteSheetLoader=s;var h=r(17);e.SpriteSheetJSONLoader=h;var u=r(18);e.MultiLoader=u,[e.MultiLoader,e.ImageDataLoader,e.BitmapLoader,e.TextLoader,e.JSONLoader,e.SpriteSheetLoader,e.SpriteSheetJSONLoader]},function(t,e,r){"use strict";function n(t){if(!("number"==typeof t&&t>0||"max"===t||"fit"===t||"none"===t)){var e=parseInt(t,10);if(isNaN(e)||!(e>0))throw new Error("bad scaleMode: "+t)}}var i=r(22),o=function(){function t(t,e){var r=this;this.stage=t,e=e||{},this.centerView=!!e.center,this.scaleMode=e.scale||"none",n(this.scaleMode),t.canvas.style.position="absolute",this.update=function(){var t=i.getViewport();"fit"===r.scaleMode?r.scaleFit(t):"max"===r.scaleMode?r.scaleAspect(t):r.stage.renderer.resize(),r.centerView||"max"===r.scaleMode?r.moveScreenCenter(t):r.moveScreenTo(0,0)},this.setMode(this.scaleMode,this.centerView)}return t.prototype.scale=function(t){this.setMode(t,this.centerView)},t.prototype.center=function(t){"undefined"==typeof t&&(t=!0),this.setMode(this.scaleMode,t)},t.prototype.resize=function(){this.update()},t.prototype.stop=function(){this.unlisten()},t.prototype.scaleTo=function(t,e){this.scaleMode="none",this.stage.canvas.width=t,this.stage.canvas.height=e,this.stage.renderer.resize()},t.prototype.scaleFit=function(t){this.stage.canvas.width=t.width,this.stage.canvas.height=t.height,this.stage.renderer.resize()},t.prototype.scaleAspect=function(t){var e=Math.min(t.width/this.stage.width,t.height/this.stage.height);this.stage.canvas.width=Math.floor(this.stage.width*e),this.stage.canvas.height=Math.floor(this.stage.height*e),this.stage.renderer.resize()},t.prototype.moveScreenTo=function(t,e){this.stage.canvas.style.left=t+"px",this.stage.canvas.style.top=e+"px"},t.prototype.moveScreenCenter=function(t){this.moveScreenTo(Math.floor((t.width-this.stage.canvas.width)/2),Math.floor((t.height-this.stage.canvas.height)/2))},t.prototype.listen=function(){this.unlisten(),(this.centerView||"fit"===this.scaleMode)&&window.addEventListener("resize",this.update)},t.prototype.unlisten=function(){window.removeEventListener("resize",this.update)},t.prototype.setMode=function(t,e){n(t),this.scaleMode=t;var r=parseInt(this.scaleMode,10);isNaN(r)||(this.scaleMode=r,this.scaleTo(Math.floor(this.stage.width*r),Math.floor(this.stage.height*r)),this.unlisten()),"fit"===this.scaleMode&&this.moveScreenTo(0,0),(e||"fit"===this.scaleMode||"max"===this.scaleMode)&&this.listen(),this.update()},t}();e.AutoSize=o},function(t){"use strict";var e=function(){function t(t){this.url=t}return t.prototype.load=function(t){var e=this,r=document.createElement("img");r.onload=function(){var e=document.createElement("canvas");e.width=r.width,e.height=r.height;var n=e.getContext("2d");n.drawImage(r,0,0),t(null,n.getImageData(0,0,r.width,r.height)),r.onload=null,r.onerror=null},r.onerror=function(){t(new Error("cannot load "+e.url),null),r.onload=null,r.onerror=null},r.src=this.url},t}();t.exports=e},function(t,e,r){"use strict";var n=r(2),i=r(12),o=function(){function t(t,e){"undefined"==typeof e&&(e=!1),this.url=t,this.useAlpha=e}return t.prototype.load=function(t){var e=this;new i(this.url).load(function(r,i){if(r)return void t(r,null);if(e.useAlpha)t(null,new n(i.width,i.height,!0,i.data.buffer));else{for(var o=new n(i.width,i.height,!1),a=i.data,s=i.width,h=0;h<i.height;h++)for(var u=0;s>u;u++){var f=4*(h*s+u),c=3*(h*s+u);o.data[c]=a[f],o.data[c+1]=a[f+1],o.data[c+2]=a[f+2]}t(null,o)}})},t}();t.exports=o},function(t,e,r){"use strict";var n=r(25),i=function(){function t(t){this.url=t}return t.prototype.load=function(t){n({uri:this.url},function(e,r,n){e?t(e,null):t(null,n)})},t}();t.exports=i},function(t,e,r){"use strict";var n=r(14),i=function(){function t(t){this.url=t}return t.prototype.load=function(t){new n(this.url).load(function(e,r){if(e)return void t(e,null);try{var n=JSON.parse(r)}catch(i){t(i,null)}t(null,n)})},t}();t.exports=i},function(t,e,r){"use strict";var n=r(2),i=r(23),o=r(12),a=function(){function t(t,e,r){"undefined"==typeof r&&(r=!1),this.url=t,this.opts=e,this.useAlpha=r}return t.prototype.load=function(t){var e=this;new o(this.url).load(function(r,o){if(r)return void t(r,null);for(var a=e.opts.outerMargin||0,s=e.opts.innerMargin||0,h=new i(e.opts.spritesX,e.opts.spritesY),u=0;u<e.opts.spritesY;u++)for(var f=0;f<e.opts.spritesX;f++){var c=a+f*(e.opts.sizeX+s),p=a+u*(e.opts.sizeY+s);h.addSprite(n.clipFromData(o.data,o.width,o.height,4,c,p,e.opts.sizeX,e.opts.sizeY,e.useAlpha))}t(null,h)})},t}();t.exports=a},function(t,e,r){"use strict";function n(t,e){a.lastIndex=0;var r=a.exec(t);return r[1]+r[2]+e}var i=r(15),o=r(16),a=/^(.*?)(\/?)([^\/]+?)$/,s=function(){function t(t,e){"undefined"==typeof e&&(e=!1),this.url=t,this.useAlpha=e}return t.prototype.load=function(t){var e=this;new i(this.url).load(function(r,i){return r?void t(r,null):void new o(n(e.url,i.image),i,e.useAlpha).load(t)})},t}();t.exports=s},function(t){"use strict";var e=function(){function t(t){var e=this;this.queued=[],t&&t.forEach(function(t){e.queued.push(t)})}return t.prototype.load=function(t){var e=this,r=!1,n=new Array(this.queued.length);this.queued.forEach(function(i,o){i.load(function(a,s){if(!r){if(a)return console.log(i.url),console.error(a),t(a,null),void(r=!0);n[o]=s,e.queued[o]=null,e.queued.every(function(t){return!t})&&(t(a,n),e.queued=null)}})})},t}();t.exports=e},function(t){"use strict";function e(t){for(var e=t.length,r=3;e>r;r++)t[r]=255}var r=function(){function t(t,r){this.canvas=r,this.px=t.data,this.width=t.width,this.height=t.height,this.channels=t.useAlpha?4:3,this.ctx=this.canvas.getContext("2d"),this.output=this.ctx.createImageData(this.canvas.width,this.canvas.height),e(this.output.data),this.ctx.putImageData(this.output,0,0)}return t.prototype.resize=function(){(this.output.width!==this.canvas.width||this.output.height!==this.canvas.height)&&(this.output=this.ctx.createImageData(this.canvas.width,this.canvas.height),e(this.output.data))},t.prototype.update=function(){for(var t=this.output.data,e=this.output.width,r=this.output.height,n=this.width/e,i=this.height/r,o=0;r>o;o++)for(var a=0;e>a;a++){var s=Math.floor(a*n),h=Math.floor(o*i),u=(s+h*this.width)*this.channels,f=4*(a+o*e);t[f]=this.px[u],t[f+1]=this.px[u+1],t[f+2]=this.px[u+2]}this.ctx.putImageData(this.output,0,0)},t.prototype.destruct=function(){this.px=null,this.ctx=null,this.canvas=null,this.output=null},t}();t.exports=r},function(t){"use strict";function e(t,e,r){var n=t.createShader(r);t.shaderSource(n,e),t.compileShader(n);var i=t.getShaderParameter(n,t.COMPILE_STATUS);if(!i)throw new Error('error compiling shader "'+n+'":'+t.getShaderInfoLog(n));return n}var r=["attribute vec2 a_position;","attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","    gl_Position = vec4(a_position, 0, 1);","    v_texCoord = a_texCoord;","}"].join("\n"),n=["precision mediump float;","uniform sampler2D u_image;","varying vec2 v_texCoord;","void main() {","    gl_FragColor = texture2D(u_image, v_texCoord);","}"].join("\n"),i=function(){function t(t,i){if(this.canvas=i,this.width=t.width,this.height=t.height,!t.buffer||!Uint8Array)throw new Error("bitmap doesn't support buffer operations");if(this.px=new Uint8Array(t.buffer),!window.WebGLRenderingContext)throw new Error("browser does not support WegGL");var o={alpha:!1},a=this.gl=this.canvas.getContext("webgl",o)||this.canvas.getContext("experimental-webgl",o);if(!a)throw new Error("could not create WebGL context");var s=a.createProgram();a.attachShader(s,e(a,r,a.VERTEX_SHADER)),a.attachShader(s,e(a,n,a.FRAGMENT_SHADER)),a.linkProgram(s);var h=a.getProgramParameter(s,a.LINK_STATUS);if(!h)throw new Error("error in program linking:"+a.getProgramInfoLog(s));a.useProgram(s),this.positionLocation=a.getAttribLocation(s,"a_position"),this.texCoordLocation=a.getAttribLocation(s,"a_texCoord"),this.positionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.positionBuffer),a.enableVertexAttribArray(this.positionLocation),a.vertexAttribPointer(this.positionLocation,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a.STATIC_DRAW),this.texCoordBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.texCoordBuffer),a.enableVertexAttribArray(this.texCoordLocation),a.vertexAttribPointer(this.texCoordLocation,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,0,0,1,1,1,0]),a.STATIC_DRAW),this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.colorMask(!0,!0,!0,!1),a.viewport(0,0,this.canvas.width,this.canvas.height)}return t.prototype.resize=function(){this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT)},t.prototype.update=function(){this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGB,this.width,this.height,0,this.gl.RGB,this.gl.UNSIGNED_BYTE,this.px),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},t.prototype.destruct=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl=null,this.px=null,this.canvas=null},t}();t.exports=i},function(t,e,r){"use strict";var n=r(24),i=new n("micro",4,{0:["111","101","101","111"],1:["01","11","01","01"],2:["110","001","010","111"],3:["111","011","001","111"],4:["100","101","111","010"],5:["111","100","111","011"],6:["100","111","101","111"],7:["111","001","010","010"],8:["111","101","111","111"],9:["111","101","111","001"],A:["111","101","111","101"],B:["100","111","101","111"],C:["111","100","100","111"],D:["110","101","101","110"],E:["111","110","100","111"],F:["111","100","110","100"],G:["111","100","101","111"],H:["101","101","111","101"],I:["1","1","1","1"],J:["001","001","101","111"],K:["101","110","101","101"],L:["10","10","10","11"],M:["11011","11011","10101","10001"],N:["1001","1101","1011","1001"],O:["111","101","101","111"],P:["111","101","111","100"],Q:["111","101","111","001"],R:["111","101","100","100"],S:["111","100","111","011"],T:["111","010","010","010"],U:["101","101","101","111"],V:["101","101","101","010"],W:["10001","10001","10101","01110"],X:["101","010","010","101"],Y:["101","101","010","010"],Z:["111","011","100","111"]," ":["0","0","0","0"],"!":["1","1","0","1"],"?":["111","001","000","010"],".":["0","0","0","1"],",":["0","0","1","1"],"+":["000","010","111","010"],"-":["00","00","11","00"],"=":["000","111","000","111"],"*":["000","101","010","101"],_:["000","000","000","111"],"[":["11","10","10","11"],"]":["11","01","01","11"],"(":["01","10","10","01"],")":["10","01","01","10"],"<":["00","01","10","01"],">":["00","10","01","10"],"'":["1","1","0","0"],'"':["101","101","000","000"],"`":["10","01","00","00"],"~":["000","110","011","000"],"/":["001","010","010","100"],"\\":["100","010","010","001"]});t.exports=i},function(t,e){"use strict";function r(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t[e+"Width"],height:t[e+"Height"]}}e.getViewport=r},function(t){"use strict";var e=function(){function t(t,e){this.sprites=[],this.width=t,this.height=e}return t.prototype.getSprite=function(t,e){return this.getSpriteAt(e*this.width+t)},t.prototype.getSpriteAt=function(t){if(0===this.sprites.length)throw new Error("sheet has zero images");return this.sprites[t%this.sprites.length]},t.prototype.addSprite=function(t){this.sprites.push(t)},t}();t.exports=e},function(t,e,r){"use strict";var n=r(26),i=function(){function t(t,e,r){var i=this;this.name=t,this.height=e,this.chars=Object.create(null),Object.keys(r).forEach(function(t){i.chars[t]=new n(t,r[t])})}return t}();t.exports=i},function(t,e,r){function n(t,e){function r(){4===f.readyState&&n()}function n(){var t=null,r=f.statusCode=f.status,n=null;if(f.response?n=f.body=f.response:("text"===f.responseType||""===f.responseType)&&(n=f.body=f.responseText||f.responseXML),1223===r&&(r=204),0===r||r>=400&&600>r){var i=("string"==typeof n?n:!1)||s[String(f.status).charAt(0)];t=new Error(i),t.statusCode=f.status}if(w)try{n=f.body=JSON.parse(n)}catch(o){}e(t,f,n)}function o(t){e(t,f)}"string"==typeof t&&(t={uri:t}),t=t||{},e=a(e);var f=t.xhr||null;!f&&t.cors?f=new u:f||(f=new h);var c,p=f.url=t.uri||t.url,l=f.method=t.method||"GET",d=t.body||t.data,g=f.headers=t.headers||{},y=!!t.sync,w=!1;if("json"in t&&(w=!0,g.Accept="application/json","GET"!==l&&"HEAD"!==l&&(g["Content-Type"]="application/json",d=JSON.stringify(t.json))),f.onreadystatechange=r,f.onload=n,f.onerror=o,f.onprogress=function(){},f.ontimeout=i,f.open(l,p,!y),t.cors&&(f.withCredentials=!0),y||(f.timeout="timeout"in t?t.timeout:5e3),f.setRequestHeader)for(c in g)g.hasOwnProperty(c)&&f.setRequestHeader(c,g[c]);return"responseType"in t&&(f.responseType=t.responseType),f.send(d),f}function i(){}var o=r(27),a=r(28),s={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},h=o.XMLHttpRequest||i,u="withCredentials"in new h?o.XMLHttpRequest:o.XDomainRequest;t.exports=n},function(t){"use strict";var e=function(){function t(t,e){this.char=t,this.width=e[0].length,this.map=[];for(var r=0;r<e.length;r++)for(var n=e[r],i=0;i<n.length;i++)this.map.push("1"===n.charAt(i))}return t}();t.exports=e},function(t,e){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:{}}).call(e,function(){return this}())},function(t){function e(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}t.exports=e,e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0})})}])});