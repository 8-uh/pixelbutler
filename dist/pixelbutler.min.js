!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.pixelbutler=e():t.pixelbutler=e()}(this,function(){return function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function r(t,i,r){return new e.RGBA(t,i,r)}function n(t,i,r){return m.h=t,m.s=i,m.v=r,e.hsv2rgb(m)}function o(){return!!(window&&window.WebGLRenderingContext&&ArrayBuffer&&Uint8Array&&Uint8ClampedArray)}var a=i(1);e.Stage=a;var s=i(2);e.Bitmap=s;var h=i(3);e.FPS=h;var u=i(4);e.RGBA=u;var c=i(5);e.HSV=c;var f=i(9);e.PerlinNoise=f;var d=i(10);e.loader=d;var p=i(6),l=p.rand;e.rand=l;var v=i(7),g=v.rgb2hsv;e.rgb2hsv=g;var w=v.hsv2rgb;e.hsv2rgb=w;var y=i(8);e.ticker=y,e.rgb=r;var m=new e.HSV;e.hsv=n,e.supportsWebGL=o,[e.loader,e.PerlinNoise,p,v,e.ticker,e.RGBA,e.HSV,e.Bitmap,e.FPS,e.Stage]},function(t,e,i){"use strict";var r=this.__extends||function(t,e){function i(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);i.prototype=e.prototype,t.prototype=new i},n=i(2),o=i(19),a=i(20),s=i(11),h=function(t){function e(e){if(t.call(this,e.width||32,e.height||32,!!e.transparent),this.canvas="string"==typeof e.canvas?document.getElementById(e.canvas):e.canvas,!this.canvas)throw new Error('cannot locate canvas with id "'+e.canvas+'"');if(this.clear(),"canvas"!==e.renderer)try{this.renderer=new a(this,this.canvas)}catch(i){console.log(i),console.log("render init error, switching to fallback")}this.renderer||(this.renderer=new o(this,this.canvas)),(e.center||e.scale)&&(this.autoSize=new s.AutoSize(this,{center:e.center,scale:e.scale}))}return r(e,t),e.prototype.resizeTo=function(e,i){(e!==this.width||i!==this.height)&&(t.prototype.resizeTo.call(this,e,i),this.autoSize&&this.autoSize.update())},e.prototype.render=function(){this.renderer.update()},e.prototype.destruct=function(){this.autoSize&&(this.autoSize.stop(),this.autoSize=null),this.renderer&&(this.renderer.destruct(),this.renderer=null),this.canvas=null},e}(n);t.exports=h},function(t,e,i){"use strict";var r=i(4),n=i(21),o=i(7),a=i(6),s=a.clamp,h=(new r(0,0,0,0),new r(0,0,0)),u=(new r(255,0,255),function(){function t(t,e,i,r){if("undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=null),this.width=t,this.height=e,this.useAlpha=i,this.channels=i?4:3,r){var n=this.width*this.height*this.channels;if(r.byteLength!==n)throw new Error("bad raw data dimensions; expected "+n+", received "+r.byteLength);this.buffer=r,this.data=new Uint8ClampedArray(this.buffer)}else this._resetData()}return t.prototype._resetData=function(){this.buffer=new ArrayBuffer(this.width*this.height*this.channels),this.data=new Uint8ClampedArray(this.buffer)},t.prototype.resizeTo=function(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this._resetData())},t.prototype.setPixel=function(t,e,i){if(t=Math.floor(t),e=Math.floor(e),!(0>t||0>e||t>=this.width||e>=this.height)){var r=(t+e*this.width)*this.channels;this.data[r]=i.r,this.data[r+1]=i.g,this.data[r+2]=i.b}},t.prototype.getPixel=function(t,e,i){if(t=Math.floor(t),e=Math.floor(e),0>t||0>e||t>=this.width||e>=this.height)return null;i=i||new r;var n=(t+e*this.width)*this.channels;return i.r=this.data[n],i.g=this.data[n+1],i.b=this.data[n+2],i},t.prototype.fillRect=function(t,e,i,r,n){if(t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),r=Math.floor(r),!(t>=this.width||e>=this.height||0>t+i||0>e+r)){var o=t,a=t+i,s=e,h=e+r;0>o&&(o=0),0>s&&(s=0),a>=this.width&&(a=this.width),h>=this.height&&(h=this.height);for(var u=s;h>u;u++)for(var c=o;a>c;c++){var f=(c+u*this.width)*this.channels;this.data[f]=n.r,this.data[f+1]=n.g,this.data[f+2]=n.b}}},t.prototype.drawLineH=function(t,e,i,r){var n=s(Math.floor(t+i),0,this.width);for(t=s(Math.floor(t),0,this.width),e=s(Math.floor(e),0,this.height);n>t;t++){var o=(t+e*this.width)*this.channels;this.data[o]=r.r,this.data[o+1]=r.g,this.data[o+2]=r.b}},t.prototype.drawLineV=function(t,e,i,r){var n=s(Math.floor(e+i),0,this.height);for(t=s(Math.floor(t),0,this.width),e=s(Math.floor(e),0,this.height);n>e;e++){var o=(t+e*this.width)*this.channels;this.data[o]=r.r,this.data[o+1]=r.g,this.data[o+2]=r.b}},t.prototype.drawRect=function(t,e,i,r,n){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i),r=Math.floor(r),this.drawLineH(t,e,i,n),this.drawLineH(t,e+r-1,i,n),this.drawLineV(t,e,r,n),this.drawLineV(t+i-1,e,r,n)},t.prototype.fillCircle=function(t,e,i,r){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i);for(var n=-i;i>=n;n++)for(var o=-i;i>=o;o++)if(!(0>t+o||0>e+n||t+o>=this.width||e+n>=this.height)&&i*i>=o*o+n*n){var a=(t+o+(e+n)*this.width)*this.channels;this.data[a]=r.r,this.data[a+1]=r.g,this.data[a+2]=r.b}},t.prototype.drawCircle=function(t,e,i,r){t=Math.floor(t),e=Math.floor(e),i=Math.floor(i);for(var n=0;360>n;n++){var o=Math.round(Math.cos(n*(Math.PI/180))*i)+t,a=Math.round(Math.sin(n*(Math.PI/180))*i)+e;if(!(0>o||0>a||o>=this.width||a>=this.height)){var s=(o+a*this.width)*this.channels;this.data[s]=r.r,this.data[s+1]=r.g,this.data[s+2]=r.b}}},t.prototype.shader=function(t){var e,i,n,o=new r;for(e=0;e<this.height;e++)for(i=0;i<this.width;i++){var a=(i+e*this.width)*this.channels;o.r=this.data[a],o.g=this.data[a+1],o.b=this.data[a+2],n=t(i,e,o),this.data[a]=n.r,this.data[a+1]=n.g,this.data[a+2]=n.b}},t.prototype.text=function(t,e,i,r){i=String(i);for(var n=0;n<i.length;n++)t+=this.drawChar(t,e,i.charAt(n),r)+1},t.prototype.drawChar=function(t,e,i,r){var o=n.chars[i.toUpperCase()];if(!o)return 0;for(var a=0;a<n.height;a++)for(var s=0;s<o.width;s++)o.map[a*o.width+s]&&this.setPixel(t+s,e+a,r);return o.width},t.prototype.blit=function(t,e,i){e=e?Math.floor(e):0,i=i?Math.floor(i):0;var r,n,o,a;if(!(e>=this.width||i>=this.height||e+t.width<0||i+t.height<0)){var s=e,h=e+t.width,u=i,c=i+t.height;if(0>s&&(s=0),0>u&&(u=0),h>=this.width&&(h=this.width),c>=this.height&&(c=this.height),t.useAlpha)for(r=u;c>r;r++)for(n=s;h>n;n++){o=(n-e+(r-i)*t.width)*t.channels,a=(n+r*this.width)*this.channels;var f=t.data[o+3]/255,d=1-f;this.data[a]=Math.round(this.data[a]*d+t.data[o]*f),this.data[a+1]=Math.round(this.data[a+1]*d+t.data[o+1]*f),this.data[a+2]=Math.round(this.data[a+2]*d+t.data[o+2]*f)}else for(r=u;c>r;r++)for(n=s;h>n;n++)o=(n-e+(r-i)*t.width)*t.channels,a=(n+r*this.width)*this.channels,this.data[a]=t.data[o],this.data[a+1]=t.data[o+1],this.data[a+2]=t.data[o+2]}},t.prototype.clear=function(t){t=t||h;var e,i;if(this.useAlpha&&o.useAlpha(t))for(e=this.width*this.height*4,i=0;e>i;i+=4)this.data[i]=t.r,this.data[i+1]=t.g,this.data[i+2]=t.b,this.data[i+3]=t.a;else for(e=this.width*this.height*this.channels,i=0;e>i;i+=this.channels)this.data[i]=t.r,this.data[i+1]=t.g,this.data[i+2]=t.b},t.prototype.clearAlpha=function(t){if("undefined"==typeof t&&(t=0),this.useAlpha)for(var e=this.width*this.height*4,i=3;e>i;i+=4)this.data[i]=t},t.clipFromData=function(e,i,r,n,o,a,s,h,u){var c,f,d,p,l=u?4:3,v=new Uint8Array(h*s*l);if(u)for(c=0;h>c;c++)for(f=0;s>f;f++)d=(f+o+(c+a)*i)*n,p=(f+c*s)*l,v[p]=e[d],v[p+1]=e[d+1],v[p+2]=e[d+2],v[p+3]=e[d+3];else for(c=0;h>c;c++)for(f=0;s>f;f++)d=(f+o+(c+a)*i)*n,p=(f+c*s)*l,v[p]=e[d],v[p+1]=e[d+1],v[p+2]=e[d+2];return new t(s,h,u,v)},t}());t.exports=u},function(t){"use strict";var e=function(){function t(t,e){"undefined"==typeof t&&(t=30),"undefined"==typeof e&&(e=2),this.tickHistory=[0],this.deltaHistory=[0],this.tickI=0,this.deltaI=0,this.smoothFPS=t,this.smoothDelta=e,this.previous=performance.now()}return t.prototype.begin=function(){var t=performance.now(),e=t-this.previous;this.tickHistory[this.tickI%this.smoothFPS]=e,this.tickI++,this.previous=t},t.prototype.end=function(){var t=performance.now(),e=t-this.previous;this.deltaHistory[this.deltaI%this.smoothDelta]=e,this.deltaI++},Object.defineProperty(t.prototype,"fps",{get:function(){for(var t=0,e=0;e<this.tickHistory.length;e++)t+=this.tickHistory[e];return Math.ceil(1e3/(t/this.tickHistory.length))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redraw",{get:function(){for(var t=0,e=0;e<this.deltaHistory.length;e++)t+=this.deltaHistory[e];return Math.ceil(t/this.deltaHistory.length)},enumerable:!0,configurable:!0}),t}();t.exports=e},function(t){"use strict";var e=function(){function t(t,e,i,r){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"undefined"==typeof r&&(r=255),this.r=t,this.g=e,this.b=i,this.a=r}return t}();t.exports=e},function(t){"use strict";var e=function(){function t(t,e,i){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),this.h=t,this.s=e,this.v=i}return t}();t.exports=e},function(t,e){"use strict";function i(t){return Math.floor(Math.random()*t)}function r(t,e,i){return e>t?e:t>i?i:t}e.rand=i,e.clamp=r},function(t,e,i){"use strict";function r(t){return"number"==typeof t.a&&t.a<255}function n(t){var e,i,r,n,o,s,h,u,c=t.h,f=t.s,d=t.v;if(c=Math.max(0,Math.min(360,c)),f=Math.max(0,Math.min(100,f)),d=Math.max(0,Math.min(100,d)),f/=100,d/=100,0===f)return e=i=r=d,new a(Math.round(255*e),Math.round(255*i),Math.round(255*r));switch(c/=60,n=Math.floor(c),o=c-n,s=d*(1-f),h=d*(1-f*o),u=d*(1-f*(1-o)),n){case 0:e=d,i=u,r=s;break;case 1:e=h,i=d,r=s;break;case 2:e=s,i=d,r=u;break;case 3:e=s,i=h,r=d;break;case 4:e=u,i=s,r=d;break;default:e=d,i=s,r=h}return new a(Math.round(255*e),Math.round(255*i),Math.round(255*r))}function o(t){var e,i,r,n,o,a=t.r/255,h=t.g/255,u=t.b/255,c=Math.max(a,h,u),f=c-Math.min(a,h,u),d=function(t){return(c-t)/6/f+.5};return 0===f?n=o=0:(o=f/c,e=d(a),i=d(h),r=d(u),a===c?n=r-i:h===c?n=1/3+e-r:u===c&&(n=2/3+i-e),0>n?n+=1:n>1&&(n-=1)),new s(Math.round(360*n),Math.round(100*o),Math.round(100*c))}var a=i(4),s=i(5);e.useAlpha=r,e.hsv2rgb=n,e.rgb2hsv=o},function(t,e){"use strict";function i(t,e){function i(){if(r){n++;var e=performance.now();t(n,e-o),o=e}}var r=0,n=0,o=performance.now(),a={};return a.start=function(){r&&clearInterval(r),r=setInterval(i,1e3/e)},a.step=function(){i()},a.stop=function(){r&&(clearInterval(r),r=0)},a.isRunning=function(){return!!r},a}function r(t){function e(){if(r){n++;var i=performance.now();t(n,i-o),o=i,requestAnimationFrame(e)}}var i,r=!1,n=0,o=performance.now(),a={};return a.start=function(){r||(r=!0,i=requestAnimationFrame(e))},a.step=function(){e()},a.stop=function(){r&&(r=!1,cancelAnimationFrame(i))},a.isRunning=function(){return r},a}e.interval=i,e.request=r},function(t){var e=function(){function t(){this.permutation=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],this.p=new Array(512);for(var t=0;256>t;t++)this.p[256+t]=this.p[t]=this.permutation[t]}return t.prototype.noise=function(t,e,i){var r=255&Math.floor(t),n=255&Math.floor(e),o=255&Math.floor(i);t-=Math.floor(t),e-=Math.floor(e),i-=Math.floor(i);var a=this.fade(t),s=this.fade(e),h=this.fade(i),u=this.p[r]+n,c=this.p[u]+o,f=this.p[u+1]+o,d=this.p[r+1]+n,p=this.p[d]+o,l=this.p[d+1]+o;return this.scale(this.lerp(h,this.lerp(s,this.lerp(a,this.grad(this.p[c],t,e,i),this.grad(this.p[p],t-1,e,i)),this.lerp(a,this.grad(this.p[f],t,e-1,i),this.grad(this.p[l],t-1,e-1,i))),this.lerp(s,this.lerp(a,this.grad(this.p[c+1],t,e,i-1),this.grad(this.p[p+1],t-1,e,i-1)),this.lerp(a,this.grad(this.p[f+1],t,e-1,i-1),this.grad(this.p[l+1],t-1,e-1,i-1)))))},t.prototype.fade=function(t){return t*t*t*(t*(6*t-15)+10)},t.prototype.lerp=function(t,e,i){return e+t*(i-e)},t.prototype.grad=function(t,e,i,r){var n=15&t,o=8>n?e:i,a=4>n?i:12==n||14==n?e:r;return(0==(1&n)?o:-o)+(0==(2&n)?a:-a)},t.prototype.scale=function(t){return(1+t)/2},t}();t.exports=e},function(t,e,i){var r=i(12);e.ImageDataLoader=r;var n=i(13);e.BitmapLoader=n;var o=i(14);e.TextLoader=o;var a=i(15);e.JSONLoader=a;var s=i(16);e.SpriteSheetLoader=s;var h=i(17);e.SpriteSheetJSONLoader=h;var u=i(18);e.MultiLoader=u,[e.MultiLoader,e.ImageDataLoader,e.BitmapLoader,e.TextLoader,e.JSONLoader,e.SpriteSheetLoader,e.SpriteSheetJSONLoader]},function(t,e,i){"use strict";function r(t){if(!("number"==typeof t&&t>0||"max"===t||"fit"===t||"none"===t)){var e=parseInt(t,10);if(isNaN(e)||!(e>0))throw new Error("bad scaleMode: "+t)}}var n=i(22),o=function(){function t(t,e){var i=this;this.stage=t,e=e||{},this.centerView=!!e.center,this.scaleMode=e.scale||"none",r(this.scaleMode),t.canvas.style.position="absolute",this.update=function(){var t=n.getViewport();"fit"===i.scaleMode?i.scaleFit(t):"max"===i.scaleMode?i.scaleAspect(t):i.stage.renderer.resize(),i.centerView||"max"===i.scaleMode?i.moveScreenCenter(t):i.moveScreenTo(0,0)},this.setMode(this.scaleMode,this.centerView)}return t.prototype.scale=function(t){this.setMode(t,this.centerView)},t.prototype.center=function(t){"undefined"==typeof t&&(t=!0),this.setMode(this.scaleMode,t)},t.prototype.resize=function(){this.update()},t.prototype.stop=function(){this.unlisten()},t.prototype.scaleTo=function(t,e){this.scaleMode="none",this.stage.canvas.width=t,this.stage.canvas.height=e,this.stage.renderer.resize()},t.prototype.scaleFit=function(t){this.stage.canvas.width=t.width,this.stage.canvas.height=t.height,this.stage.renderer.resize()},t.prototype.scaleAspect=function(t){var e=Math.min(t.width/this.stage.width,t.height/this.stage.height);this.stage.canvas.width=Math.floor(this.stage.width*e),this.stage.canvas.height=Math.floor(this.stage.height*e),this.stage.renderer.resize()},t.prototype.moveScreenTo=function(t,e){this.stage.canvas.style.left=t+"px",this.stage.canvas.style.top=e+"px"},t.prototype.moveScreenCenter=function(t){this.moveScreenTo(Math.floor((t.width-this.stage.canvas.width)/2),Math.floor((t.height-this.stage.canvas.height)/2))},t.prototype.listen=function(){this.unlisten(),(this.centerView||"fit"===this.scaleMode)&&window.addEventListener("resize",this.update)},t.prototype.unlisten=function(){window.removeEventListener("resize",this.update)},t.prototype.setMode=function(t,e){r(t),this.scaleMode=t;var i=parseInt(this.scaleMode,10);isNaN(i)||(this.scaleMode=i,this.scaleTo(Math.floor(this.stage.width*i),Math.floor(this.stage.height*i)),this.unlisten()),"fit"===this.scaleMode&&this.moveScreenTo(0,0),(e||"fit"===this.scaleMode||"max"===this.scaleMode)&&this.listen(),this.update()},t}();e.AutoSize=o},function(t){"use strict";var e=function(){function t(t){this.url=t}return t.prototype.load=function(t){var e=this,i=document.createElement("img");i.onload=function(){var e=document.createElement("canvas");e.width=i.width,e.height=i.height;var r=e.getContext("2d");r.drawImage(i,0,0),t(null,r.getImageData(0,0,i.width,i.height)),i.onload=null,i.onerror=null},i.onerror=function(){t(new Error("cannot load "+e.url),null),i.onload=null,i.onerror=null},i.src=this.url},t}();t.exports=e},function(t,e,i){"use strict";var r=i(2),n=i(12),o=function(){function t(t,e){"undefined"==typeof e&&(e=!1),this.url=t,this.useAlpha=e}return t.prototype.load=function(t){var e=this;new n(this.url).load(function(i,n){if(i)return void t(i,null);if(e.useAlpha)t(null,new r(n.width,n.height,!0,n.data.buffer));else{for(var o=new r(n.width,n.height,!1),a=n.data,s=n.width,h=0;h<n.height;h++)for(var u=0;s>u;u++){var c=4*(h*s+u),f=3*(h*s+u);o.data[f]=a[c],o.data[f+1]=a[c+1],o.data[f+2]=a[c+2]}t(null,o)}})},t}();t.exports=o},function(t,e,i){"use strict";var r=i(25),n=function(){function t(t){this.url=t}return t.prototype.load=function(t){r({uri:this.url},function(e,i,r){e?t(e,null):t(null,r)})},t}();t.exports=n},function(t,e,i){"use strict";var r=i(14),n=function(){function t(t){this.url=t}return t.prototype.load=function(t){new r(this.url).load(function(e,i){if(e)return void t(e,null);try{var r=JSON.parse(i)}catch(n){t(n,null)}t(null,r)})},t}();t.exports=n},function(t,e,i){"use strict";var r=i(2),n=i(23),o=i(12),a=function(){function t(t,e,i){"undefined"==typeof i&&(i=!1),this.url=t,this.opts=e,this.useAlpha=i}return t.prototype.load=function(t){var e=this;new o(this.url).load(function(i,o){if(i)return void t(i,null);for(var a=e.opts.outerMargin||0,s=e.opts.innerMargin||0,h=new n(e.opts.spritesX,e.opts.spritesY),u=0;u<e.opts.spritesY;u++)for(var c=0;c<e.opts.spritesX;c++){var f=a+c*(e.opts.sizeX+s),d=a+u*(e.opts.sizeY+s);h.addSprite(r.clipFromData(o.data,o.width,o.height,4,f,d,e.opts.sizeX,e.opts.sizeY,e.useAlpha))}t(null,h)})},t}();t.exports=a},function(t,e,i){"use strict";function r(t,e){a.lastIndex=0;var i=a.exec(t);return i[1]+i[2]+e}var n=i(15),o=i(16),a=/^(.*?)(\/?)([^\/]+?)$/,s=function(){function t(t,e){"undefined"==typeof e&&(e=!1),this.url=t,this.useAlpha=e}return t.prototype.load=function(t){var e=this;new n(this.url).load(function(i,n){return i?void t(i,null):void new o(r(e.url,n.image),n,e.useAlpha).load(t)})},t}();t.exports=s},function(t){"use strict";var e=function(){function t(t){var e=this;this.queued=[],t&&t.forEach(function(t){e.queued.push(t)})}return t.prototype.load=function(t){var e=this,i=!1,r=new Array(this.queued.length);this.queued.forEach(function(n,o){n.load(function(a,s){if(!i){if(a)return console.log(n.url),console.error(a),t(a,null),void(i=!0);r[o]=s,e.queued[o]=null,e.queued.every(function(t){return!t})&&(t(a,r),e.queued=null)}})})},t}();t.exports=e},function(t){"use strict";function e(t){for(var e=t.length,i=3;e>i;i++)t[i]=255}var i=function(){function t(t,i){this.canvas=i,this.px=t.data,this.width=t.width,this.height=t.height,this.channels=t.useAlpha?4:3,this.ctx=this.canvas.getContext("2d"),this.output=this.ctx.createImageData(this.canvas.width,this.canvas.height),e(this.output.data),this.ctx.putImageData(this.output,0,0)}return t.prototype.resize=function(){(this.output.width!==this.canvas.width||this.output.height!==this.canvas.height)&&(this.output=this.ctx.createImageData(this.canvas.width,this.canvas.height),e(this.output.data))},t.prototype.update=function(){for(var t=this.output.data,e=this.output.width,i=this.output.height,r=this.width/e,n=this.height/i,o=0;i>o;o++)for(var a=0;e>a;a++){var s=Math.floor(a*r),h=Math.floor(o*n),u=(s+h*this.width)*this.channels,c=4*(a+o*e);t[c]=this.px[u],t[c+1]=this.px[u+1],t[c+2]=this.px[u+2]}this.ctx.putImageData(this.output,0,0)},t.prototype.destruct=function(){this.px=null,this.ctx=null,this.canvas=null,this.output=null},t}();t.exports=i},function(t){"use strict";function e(t,e,i){var r=t.createShader(i);t.shaderSource(r,e),t.compileShader(r);var n=t.getShaderParameter(r,t.COMPILE_STATUS);if(!n)throw new Error('error compiling shader "'+r+'":'+t.getShaderInfoLog(r));return r}var i=["attribute vec2 a_position;","attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","    gl_Position = vec4(a_position, 0, 1);","    v_texCoord = a_texCoord;","}"].join("\n"),r=["precision mediump float;","uniform sampler2D u_image;","varying vec2 v_texCoord;","void main() {","    gl_FragColor = texture2D(u_image, v_texCoord);","}"].join("\n"),n=function(){function t(t,n){if(this.canvas=n,this.width=t.width,this.height=t.height,!t.buffer||!Uint8Array)throw new Error("bitmap doesn't support buffer operations");if(this.px=new Uint8Array(t.buffer),!window.WebGLRenderingContext)throw new Error("browser does not support WegGL");var o={alpha:!1},a=this.gl=this.canvas.getContext("webgl",o)||this.canvas.getContext("experimental-webgl",o);if(!a)throw new Error("could not create WebGL context");var s=a.createProgram();a.attachShader(s,e(a,i,a.VERTEX_SHADER)),a.attachShader(s,e(a,r,a.FRAGMENT_SHADER)),a.linkProgram(s);var h=a.getProgramParameter(s,a.LINK_STATUS);if(!h)throw new Error("error in program linking:"+a.getProgramInfoLog(s));a.useProgram(s),this.positionLocation=a.getAttribLocation(s,"a_position"),this.texCoordLocation=a.getAttribLocation(s,"a_texCoord"),this.positionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.positionBuffer),a.enableVertexAttribArray(this.positionLocation),a.vertexAttribPointer(this.positionLocation,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),a.STATIC_DRAW),this.texCoordBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.texCoordBuffer),a.enableVertexAttribArray(this.texCoordLocation),a.vertexAttribPointer(this.texCoordLocation,2,a.FLOAT,!1,0,0),a.bufferData(a.ARRAY_BUFFER,new Float32Array([0,1,1,1,0,0,0,0,1,1,1,0]),a.STATIC_DRAW),this.texture=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT),a.colorMask(!0,!0,!0,!1),a.viewport(0,0,this.canvas.width,this.canvas.height)}return t.prototype.resize=function(){this.gl.viewport(0,0,this.canvas.width,this.canvas.height),this.gl.clear(this.gl.COLOR_BUFFER_BIT)},t.prototype.update=function(){this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGB,this.width,this.height,0,this.gl.RGB,this.gl.UNSIGNED_BYTE,this.px),this.gl.drawArrays(this.gl.TRIANGLES,0,6)},t.prototype.destruct=function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl=null,this.px=null,this.canvas=null},t}();t.exports=n},function(t,e,i){"use strict";var r=i(24),n=new r("micro",4,{0:["111","101","101","111"],1:["01","11","01","01"],2:["110","001","010","111"],3:["111","011","001","111"],4:["100","101","111","010"],5:["111","100","111","011"],6:["100","111","101","111"],7:["111","001","010","010"],8:["111","101","111","111"],9:["111","101","111","001"],A:["111","101","111","101"],B:["100","111","101","111"],C:["111","100","100","111"],D:["110","101","101","110"],E:["111","110","100","111"],F:["111","100","110","100"],G:["111","100","101","111"],H:["101","101","111","101"],I:["1","1","1","1"],J:["001","001","101","111"],K:["101","110","101","101"],L:["10","10","10","11"],M:["11011","11011","10101","10001"],N:["1001","1101","1011","1001"],O:["111","101","101","111"],P:["111","101","111","100"],Q:["111","101","111","001"],R:["111","101","100","100"],S:["111","100","111","011"],T:["111","010","010","010"],U:["101","101","101","111"],V:["101","101","101","010"],W:["10001","10001","10101","01110"],X:["101","010","010","101"],Y:["101","101","010","010"],Z:["111","011","100","111"]," ":["0","0","0","0"],"!":["1","1","0","1"],"?":["111","001","000","010"],".":["0","0","0","1"],",":["0","0","1","1"],"+":["000","010","111","010"],"-":["00","00","11","00"],"=":["000","111","000","111"],"*":["000","101","010","101"],_:["000","000","000","111"],"[":["11","10","10","11"],"]":["11","01","01","11"],"(":["01","10","10","01"],")":["10","01","01","10"],"<":["00","01","10","01"],">":["00","10","01","10"],"'":["1","1","0","0"],'"':["101","101","000","000"],"`":["10","01","00","00"],"~":["000","110","011","000"],"/":["001","010","010","100"],"\\":["100","010","010","001"]});t.exports=n},function(t,e){"use strict";function i(){var t=window,e="inner";return"innerWidth"in window||(e="client",t=document.documentElement||document.body),{width:t[e+"Width"],height:t[e+"Height"]}}e.getViewport=i},function(t){"use strict";var e=function(){function t(t,e){this.sprites=[],this.width=t,this.height=e}return t.prototype.getSprite=function(t,e){return this.getSpriteAt(e*this.width+t)},t.prototype.getSpriteAt=function(t){if(0===this.sprites.length)throw new Error("sheet has zero images");return this.sprites[t%this.sprites.length]},t.prototype.addSprite=function(t){this.sprites.push(t)},t}();t.exports=e},function(t,e,i){"use strict";var r=i(26),n=function(){function t(t,e,i){var n=this;this.name=t,this.height=e,this.chars=Object.create(null),Object.keys(i).forEach(function(t){n.chars[t]=new r(t,i[t])})}return t}();t.exports=n},function(t,e,i){function r(t,e){function i(){4===v.readyState&&A()}function r(){var t=null;if(v.response?t=v.response:"text"!==v.responseType&&v.responseType||(t=v.responseText||v.responseXML),b)try{t=JSON.parse(t)}catch(e){}return t}function o(){return 1223===v.status?204:v.status}function f(t){var e=null;if(0===t||t>=400&&600>t){var i=("string"==typeof m?m:!1)||h[String(t).charAt(0)];e=new Error(i),e.statusCode=t}return e}function d(){var t=o(),i=f(t),n={body:r(),statusCode:t,statusText:v.statusText,raw:v};n.headers=v.getAllResponseHeaders?s(v.getAllResponseHeaders()):{},e(i,n,n.body)}function p(){var t=o(),i=f(t);v.status=v.statusCode=t,v.body=r(),v.headers=s(v.getAllResponseHeaders()),e(i,v,v.body)}function l(t){e(t,v)}"string"==typeof t&&(t={uri:t}),t=t||{},e=a(e);var v=t.xhr||null;v||(v=t.cors||t.useXDR?new c:new u);var g,w=v.url=t.uri||t.url,y=v.method=t.method||"GET",m=t.body||t.data,x=v.headers=t.headers||{},M=!!t.sync,b=!1,A=t.response?d:p;if("json"in t&&(b=!0,x.Accept="application/json","GET"!==y&&"HEAD"!==y&&(x["Content-Type"]="application/json",m=JSON.stringify(t.json))),v.onreadystatechange=i,v.onload=A,v.onerror=l,v.onprogress=function(){},v.ontimeout=n,v.open(y,w,!M),(t.withCredentials||t.cors&&t.withCredentials!==!1)&&(v.withCredentials=!0),M||(v.timeout="timeout"in t?t.timeout:5e3),v.setRequestHeader)for(g in x)x.hasOwnProperty(g)&&v.setRequestHeader(g,x[g]);else if(t.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(v.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(v),v.send(m),v}function n(){}var o=i(27),a=i(28),s=i(29),h={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},u=o.XMLHttpRequest||n,c="withCredentials"in new u?u:o.XDomainRequest;t.exports=r},function(t){"use strict";var e=function(){function t(t,e){this.char=t,this.width=e[0].length,this.map=[];for(var i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)this.map.push("1"===r.charAt(n))}return t}();t.exports=e},function(t,e){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(e,function(){return this}())},function(t){function e(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}t.exports=e,e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0})})},function(t,e,i){var r=i(30),n=i(31),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};t.exports=function(t){if(!t)return{};var e={};return n(r(t).split("\n"),function(t){var i=t.indexOf(":"),n=r(t.slice(0,i)).toLowerCase(),a=r(t.slice(i+1));"undefined"==typeof e[n]?e[n]=a:o(e[n])?e[n].push(a):e[n]=[e[n],a]}),e}},function(t,e){function i(t){return t.replace(/^\s*|\s*$/g,"")}e=t.exports=i,e.left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}},function(t,e,i){function r(t,e,i){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(i=this),"[object Array]"===h.call(t)?n(t,e,i):"string"==typeof t?o(t,e,i):a(t,e,i)}function n(t,e,i){for(var r=0,n=t.length;n>r;r++)u.call(t,r)&&e.call(i,t[r],r,t)}function o(t,e,i){for(var r=0,n=t.length;n>r;r++)e.call(i,t.charAt(r),r,t)}function a(t,e,i){for(var r in t)u.call(t,r)&&e.call(i,t[r],r,t)}var s=i(32);t.exports=r;var h=Object.prototype.toString,u=Object.prototype.hasOwnProperty},function(t){function e(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}t.exports=e;var i=Object.prototype.toString}])});